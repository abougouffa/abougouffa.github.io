<!doctype html><html><head><title>Workflow Configuration</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge">$
<link rel=me href=https://toot.community/@abougouffa><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/layouts/main.css><link rel=stylesheet href=/css/navigators/navbar.css><link rel=stylesheet href=/css/plyr.css><link rel=stylesheet href=/css/flag-icon.min.css><link rel=stylesheet href=/google-fonts/Mulish/mulish.css><link rel=stylesheet href=/fontawesome/css/all.min.css><link rel=stylesheet href=/css/colortheme/colortheme.css><link rel=icon type=image/png href=/favicon_hu7c842f6b35a8d0374567474454be744c_4177_42x0_resize_box_3.png><meta property="og:title" content="Workflow Configuration"><meta property="og:description" content="This repository Notice Intro MinEmacs config files Early configuration (early-config.el) Modules (modules.el) User configuration (config.el) General Emacs settings User information Crypto stuff Bidirectional settings Directories Misc Awqat Projects Package configuration User interface Theme & font Writing mode Completion & IDE LSP Natural languages Offline dictionaries Spell-fu Applications News feed (elfeed) Email (mu4e) IMAP (mbsync) SMTP (msmtp) Mail client and indexer (mu and mu4e) Calendar EMPV Programming Tramp Robot Operating System (ROS) Office Org mode Org mode tweaks Org + Hugo Org + LaTeX Org-roam Bibliography Org-cite Citar Text editing Helper commands System configuration Mime types Org mode files Registering org-protocol:// Configuring Chrome/Brave Git Git diffs Extensions Apache Tika App wrapper Command-line wrapper - Useful aliases AppImage Oh-my-Zsh Path Themes and customization Behavior Plugins Bootstrap Oh-my-Zsh Aliases Zsh user configuration pbcopy and pbpaste netpaste Sudo GUI!"><meta property="og:type" content="article"><meta property="og:url" content="https://abdelhakbougouffa.pro/posts/literate-config/"><meta property="article:section" content="posts"><meta property="article:modified_time" content="2023-06-30T02:23:49+02:00"><meta name=description content="Workflow Configuration"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/css/layouts/single.css><link rel=stylesheet href=/css/navigators/sidebar.css><link rel=stylesheet href=/css/style.css></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/favicon_hu7c842f6b35a8d0374567474454be744c_4177_42x0_resize_box_3.png alt=Logo>
Abdelhak's Blog</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><div id=theme-initialization style=display:none default-theme=system></div><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# onclick=enableLightTheme()><img class=menu-icon-center src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme"></a>
<a class="dropdown-item nav-link" href=# onclick=enableDarkTheme()><img class=menu-icon-center src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a>
<a class="dropdown-item nav-link" href=# onclick=useSystemTheme()><img class=menu-icon-center src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div><img src=/favicon_hu7c842f6b35a8d0374567474454be744c_4177_42x0_resize_box_3.png class=d-none id=main-logo alt=Logo>
<img src=/favicon_hu7c842f6b35a8d0374567474454be744c_4177_42x0_resize_box_3.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/images/default-hero.jpg)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/avatar_hu4ca9978d2de9ec8152cd2ee14d9907f8_291124_120x120_fit_q75_box.jpg alt="Author Image"><h5 class=author-name>Abdelhak Bougouffa</h5><p>Friday, June 30, 2023</p></div><div class=title><h1>Workflow Configuration</h1></div><div class=post-content id=post-content><ul><li><a href=#this-repository>This repository</a><ul><li><a href=#notice>Notice</a></li></ul></li><li><a href=#intro>Intro</a></li><li><a href=#minemacs-config-files>MinEmacs config files</a><ul><li><a href=#early-configuration--early-config-dot-el>Early configuration (<code>early-config.el</code>)</a></li><li><a href=#modules--modules-dot-el>Modules (<code>modules.el</code>)</a></li><li><a href=#user-configuration--config-dot-el>User configuration (<code>config.el</code>)</a></li></ul></li><li><a href=#general-emacs-settings>General Emacs settings</a><ul><li><a href=#user-information>User information</a></li><li><a href=#crypto-stuff>Crypto stuff</a></li><li><a href=#bidirectional-settings>Bidirectional settings</a></li><li><a href=#directories>Directories</a></li><li><a href=#misc>Misc</a></li><li><a href=#awqat>Awqat</a></li><li><a href=#projects>Projects</a></li></ul></li><li><a href=#package-configuration>Package configuration</a><ul><li><a href=#user-interface>User interface</a><ul><li><a href=#theme-and-font>Theme & font</a></li><li><a href=#writing-mode>Writing mode</a></li></ul></li><li><a href=#completion-and-ide>Completion & IDE</a><ul><li><a href=#lsp>LSP</a></li></ul></li><li><a href=#natural-languages>Natural languages</a><ul><li><a href=#offline-dictionaries>Offline dictionaries</a></li><li><a href=#spell-fu>Spell-fu</a></li></ul></li></ul></li><li><a href=#applications>Applications</a><ul><li><a href=#news-feed--elfeed>News feed (<code>elfeed</code>)</a></li><li><a href=#email--mu4e>Email (<code>mu4e</code>)</a><ul><li><a href=#imap--mbsync>IMAP (<code>mbsync</code>)</a></li><li><a href=#smtp--msmtp>SMTP (<code>msmtp</code>)</a></li><li><a href=#mail-client-and-indexer--mu-and-mu4e>Mail client and indexer (<code>mu</code> and <code>mu4e</code>)</a></li></ul></li><li><a href=#calendar>Calendar</a></li><li><a href=#empv>EMPV</a></li></ul></li><li><a href=#programming>Programming</a><ul><li><a href=#tramp>Tramp</a></li><li><a href=#robot-operating-system--ros>Robot Operating System (ROS)</a></li></ul></li><li><a href=#office>Office</a><ul><li><a href=#org-mode>Org mode</a><ul><li><a href=#org-mode-tweaks>Org mode tweaks</a></li><li><a href=#org-plus-hugo>Org + Hugo</a></li><li><a href=#org-plus-latex>Org + LaTeX</a></li><li><a href=#org-roam>Org-roam</a></li><li><a href=#bibliography>Bibliography</a><ul><li><a href=#org-cite>Org-cite</a></li><li><a href=#citar>Citar</a></li></ul></li></ul></li><li><a href=#text-editing>Text editing</a><ul><li><a href=#helper-commands>Helper commands</a></li></ul></li></ul></li><li><a href=#system-configuration>System configuration</a><ul><li><a href=#mime-types>Mime types</a><ul><li><a href=#org-mode-files>Org mode files</a></li><li><a href=#registering-org-protocol>Registering <code>org-protocol://</code></a></li><li><a href=#configuring-chrome-brave>Configuring Chrome/Brave</a></li></ul></li><li><a href=#git>Git</a><ul><li><a href=#git-diffs>Git diffs</a></li><li><a href=#extensions>Extensions</a></li></ul></li><li><a href=#apache-tika-app-wrapper>Apache Tika App wrapper</a></li><li><a href=#command-line-wrapper>Command-line wrapper</a>
- <a href=#useful-aliases>Useful aliases</a></li><li><a href=#appimage>AppImage</a></li><li><a href=#oh-my-zsh>Oh-my-Zsh</a><ul><li><a href=#path>Path</a></li><li><a href=#themes-and-customization>Themes and customization</a></li><li><a href=#behavior>Behavior</a></li><li><a href=#plugins>Plugins</a></li><li><a href=#bootstrap-oh-my-zsh>Bootstrap Oh-my-Zsh</a></li><li><a href=#aliases>Aliases</a></li></ul></li><li><a href=#zsh-user-configuration>Zsh user configuration</a><ul><li><a href=#pbcopy-and-pbpaste><code>pbcopy</code> and <code>pbpaste</code></a></li><li><a href=#netpaste><code>netpaste</code></a></li><li><a href=#sudo-gui>Sudo GUI!</a></li><li><a href=#neovim>Neovim</a></li><li><a href=#esp-idf>ESP-IDF</a></li><li><a href=#cli-wttrin-client>CLI wttrin client</a></li><li><a href=#minicom>Minicom</a></li><li><a href=#rust>Rust</a></li><li><a href=#clang-format>Clang-format</a></li><li><a href=#cmake>CMake</a></li><li><a href=#node>Node</a></li><li><a href=#tmux>tmux</a></li><li><a href=#other-stuff>Other stuff</a></li></ul></li><li><a href=#rust-format>Rust format</a></li><li><a href=#ecryptfs>eCryptfs</a><ul><li><a href=#unlock-and-mount-script>Unlock and mount script</a></li><li><a href=#desktop-integration>Desktop integration</a></li></ul></li><li><a href=#gdb>GDB</a><ul><li><a href=#early-init>Early init</a></li><li><a href=#init>Init</a></li></ul></li><li><a href=#gnupg>GnuPG</a></li><li><a href=#ocr-this>OCR This</a></li><li><a href=#slack>Slack</a></li><li><a href=#arch-linux-packages>Arch Linux packages</a></li><li><a href=#kde-plasma>KDE Plasma</a></li></ul></li></ul><p></p><h2 id=this-repository>This repository</h2><p>This repository (<a href=https://github.com/abougouffa/dotfiles>abougouffa/dotfiles</a>) contains my configuration files for <strong>Zsh</strong>,
<strong>MinEmacs</strong>, <strong>Vim</strong>, <strong>Alacritty</strong> and other Linux related stuff.</p><p>If you want to reuse some of these configurations, you will need to modify some
directories and add some user specific information (usernames, passwords&mldr;)</p><h3 id=notice>Notice</h3><p>This is the main configuration file, it contains the literal personal
configuration for <a href=https://github.com/abougouffa/minemacs>MinEmacs</a>, and I use it to generate some other Linux
configuration files (define aliases, environment variables, user tools, Git
configuration&mldr;).</p><p>For my old deprecated Doom Emacs configuration, see <a href=https://github.com/abougouffa/dotfiles/tree/main/dot_doom.d><code>dotfiles/dot_doom.d</code></a>.</p><h2 id=intro>Intro</h2><p>I&rsquo;ve been using Linux exclusively since 2010, <strong>GNU Emacs</strong> was always installed on
my machine, but I didn&rsquo;t discover the <strong>real</strong> Emacs until 2020. In the beginning, I
started my Vanilla Emacs configuration from scratch, but after a while, it
becomes a mess. As a new Emacs user, I didn&rsquo;t understand the in the beginning
how to optimize my configuration and how to do things correctly. I discovered
then <a href=https://github.com/syl20bnr/spacemacs>Spacemacs</a>, which made things much easier, but it was a little slow, and
just after, I found the awesome <a href=https://github.com/doomemacs/doomemacs>Doom Emacs</a>, which helped me progress and learn
more about Emacs and Lisp, but at some point, I faced multiple problems with
Doom, so I started my own configuration framework, <a href=https://github.com/abougouffa/minemacs>MinEmacs</a>.</p><p>MinEmacs is <del>intended to be</del> a minimal configuration framework. In the beginning,
I planned to use only necessary packages. However, it is starting to grow to
respond to my daily needs.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/bin/env bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># NOTE: This file is generated from &#34;config-literate.org&#34;.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># This shell script has been generated from the litterate Org configuration.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># It helps installing required tools (for Arch/Manjaro Linux) and tweak some</span>
</span></span><span style=display:flex><span><span style=color:#75715e># system settings</span>
</span></span></code></pre></div><h2 id=minemacs-config-files>MinEmacs config files</h2><h3 id=early-configuration--early-config-dot-el>Early configuration (<code>early-config.el</code>)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;;; early-config.el -*- coding: utf-8-unix; lexical-binding: t; -*-</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; NOTE: This file is generated from &#34;config-literate.org&#34;.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; MinEmacs specific stuff</span>
</span></span><span style=display:flex><span>(unless minemacs-verbose
</span></span><span style=display:flex><span>  (setq minemacs-msg-level <span style=color:#ae81ff>2</span>)) <span style=color:#75715e>; print info messages</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Disable `dashboard&#39;</span>
</span></span><span style=display:flex><span>(setq +dashboard-disable <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Force loading lazy packages immediately, not in idle time</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (setq minemacs-not-lazy t)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Enable full screen at startup</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (if-let ((fullscreen (assq &#39;fullscreen default-frame-alist)))</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;     (setcdr fullscreen &#39;fullboth)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;   (push &#39;(fullscreen . fullboth) default-frame-alist))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Setup a `debug-on-message&#39; to catch a wired message!</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (setq debug-on-message &#34;\\(?:error in process filter: \\(?:\\(?:mu4e-warn: \\)?\\[mu4e] No message at point\\)\\)&#34;)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (setq debug-on-message &#34;Package cl is deprecated&#34;)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (setenv &#34;MINEMACS_IGNORE_VERSION_CHECK&#34; &#34;1&#34;)</span>
</span></span></code></pre></div><h3 id=modules--modules-dot-el>Modules (<code>modules.el</code>)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;;; modules.el -*- coding: utf-8-unix; lexical-binding: t; -*-</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; NOTE: This file is generated from &#34;config-literate.org&#34;.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; This file can be used to override `minemacs-modules&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; and `minemacs-core-modules&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq
</span></span><span style=display:flex><span> <span style=color:#75715e>;; MinEmacs core modules</span>
</span></span><span style=display:flex><span> minemacs-core-modules
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(me-splash        <span style=color:#75715e>; Simple splash screen (inspired by emacs-splash)</span>
</span></span><span style=display:flex><span>   me-keybindings   <span style=color:#75715e>; general.el, which-key, hydra, ...</span>
</span></span><span style=display:flex><span>   me-evil          <span style=color:#75715e>; evil, evil-collection, evil-mc, ...</span>
</span></span><span style=display:flex><span>   me-core-ui       <span style=color:#75715e>; Theme and modeline</span>
</span></span><span style=display:flex><span>   me-completion)   <span style=color:#75715e>; vertico, marginalia, corfu, cape, consult, ...</span>
</span></span><span style=display:flex><span> <span style=color:#75715e>;; MinEmacs modules</span>
</span></span><span style=display:flex><span> minemacs-modules
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(me-ui            <span style=color:#75715e>; focus, writeroom-mode, emojify, ...</span>
</span></span><span style=display:flex><span>   me-editor        <span style=color:#75715e>; yasnippet, unicode-fonts, ligature, ...</span>
</span></span><span style=display:flex><span>   me-extra         <span style=color:#75715e>; better-jumper, ...</span>
</span></span><span style=display:flex><span>   me-undo          <span style=color:#75715e>; undo-fu-session, vundo, ...</span>
</span></span><span style=display:flex><span>   me-multi-cursors <span style=color:#75715e>; iedit, evil-mc, ...</span>
</span></span><span style=display:flex><span>   me-vc            <span style=color:#75715e>; magit, forge, core-review, diff-hl, ...</span>
</span></span><span style=display:flex><span>   me-project       <span style=color:#75715e>; project, consult-project-extra, ...</span>
</span></span><span style=display:flex><span>   me-prog          <span style=color:#75715e>; tree-sitter, eglot, editorconfig, ...</span>
</span></span><span style=display:flex><span>   me-checkers      <span style=color:#75715e>; flymake, flymake-easy, gdb-mi, ...</span>
</span></span><span style=display:flex><span>   me-lsp           <span style=color:#75715e>; lsp-mode, dap-mode, consult-lsp, ...</span>
</span></span><span style=display:flex><span>   me-debug         <span style=color:#75715e>; realgud, disaster, ...</span>
</span></span><span style=display:flex><span>   me-lisp          <span style=color:#75715e>; parinfer-rust, macrostep, geiser, elisp, ...</span>
</span></span><span style=display:flex><span>   me-data          <span style=color:#75715e>; csv, yaml, toml, json, ...</span>
</span></span><span style=display:flex><span>   me-org           <span style=color:#75715e>; org, org-modern, ...</span>
</span></span><span style=display:flex><span>   me-notes         <span style=color:#75715e>; org-roam, ...</span>
</span></span><span style=display:flex><span>   me-email         <span style=color:#75715e>; mu4e, mu4e-alert, org-msg, ...</span>
</span></span><span style=display:flex><span>   me-lifestyle     <span style=color:#75715e>; awqat, ...</span>
</span></span><span style=display:flex><span>   me-docs          <span style=color:#75715e>; pdf-tools, nov, ...</span>
</span></span><span style=display:flex><span>   me-calendar      <span style=color:#75715e>; calfw, calfw-org, calfw-ical, ...</span>
</span></span><span style=display:flex><span>   me-latex         <span style=color:#75715e>; tex, auctex, reftex, ...</span>
</span></span><span style=display:flex><span>   me-natural-langs <span style=color:#75715e>; spell-fu, eglot-ltex, ...</span>
</span></span><span style=display:flex><span>   me-files         <span style=color:#75715e>; dirvish, dired, vlf, ...</span>
</span></span><span style=display:flex><span>   me-tools         <span style=color:#75715e>; vterm, tldr, docker, systemd, ...</span>
</span></span><span style=display:flex><span>   me-biblio        <span style=color:#75715e>; org-cite, citar, ...</span>
</span></span><span style=display:flex><span>   me-daemon        <span style=color:#75715e>; Emacs daemon tweaks</span>
</span></span><span style=display:flex><span>   me-tty           <span style=color:#75715e>; Emacs from terminal</span>
</span></span><span style=display:flex><span>   me-rss           <span style=color:#75715e>; elfeed, ...</span>
</span></span><span style=display:flex><span>   me-robot         <span style=color:#75715e>; Robotics stuff (ros, robot-mode, ...)</span>
</span></span><span style=display:flex><span>   me-embedded      <span style=color:#75715e>; Embedded systems (arduino, openocd, bitbake, ...)</span>
</span></span><span style=display:flex><span>   me-eaf           <span style=color:#75715e>; EAF apps (browser, jupyter, file-sender, ...)</span>
</span></span><span style=display:flex><span>   me-math          <span style=color:#75715e>; maxima, ess, ...</span>
</span></span><span style=display:flex><span>   me-modeling      <span style=color:#75715e>; OpenSCAD, ...</span>
</span></span><span style=display:flex><span>   me-workspaces    <span style=color:#75715e>; tabspaces, tab-bar, ...</span>
</span></span><span style=display:flex><span>   me-window        <span style=color:#75715e>; frame &amp; window tweaks, ...</span>
</span></span><span style=display:flex><span>   me-media         <span style=color:#75715e>; empv, ...</span>
</span></span><span style=display:flex><span>   me-fun           <span style=color:#75715e>; xkcd, speed-type, ...</span>
</span></span><span style=display:flex><span>   me-binary)      <span style=color:#75715e>; hexl, decompile (using objdump)...</span>
</span></span><span style=display:flex><span> <span style=color:#75715e>;; MinEmacs disabled packages</span>
</span></span><span style=display:flex><span> minemacs-disabled-packages
</span></span><span style=display:flex><span> (<span style=color:#a6e22e>append</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#39;</span>(dashboard)))
</span></span></code></pre></div><h3 id=user-configuration--config-dot-el>User configuration (<code>config.el</code>)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;;; config.el -*- coding: utf-8-unix; lexical-binding: t; -*-</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; NOTE: This file is generated from &#34;config-literate.org&#34;.</span>
</span></span></code></pre></div><h2 id=general-emacs-settings>General Emacs settings</h2><h3 id=user-information>User information</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;; Personal info</span>
</span></span><span style=display:flex><span>(setq <span style=color:#a6e22e>user-full-name</span> <span style=color:#e6db74>&#34;Abdelhak Bougouffa&#34;</span>
</span></span><span style=display:flex><span>      user-mail-address (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;abougouffa&#34;</span> <span style=color:#e6db74>&#34;@&#34;</span> <span style=color:#e6db74>&#34;fedora&#34;</span> <span style=color:#e6db74>&#34;project&#34;</span> <span style=color:#e6db74>&#34;.&#34;</span> <span style=color:#e6db74>&#34;org&#34;</span>))
</span></span></code></pre></div><h3 id=crypto-stuff>Crypto stuff</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq-default
</span></span><span style=display:flex><span> <span style=color:#75715e>;; Encrypt files to my self by default</span>
</span></span><span style=display:flex><span> epa-file-encrypt-to <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;F808A020A3E1AC37&#34;</span>))
</span></span></code></pre></div><h3 id=bidirectional-settings>Bidirectional settings</h3><p>This combo should speedup opening files:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq-default
</span></span><span style=display:flex><span> <span style=color:#75715e>;; Better support for files with long lines</span>
</span></span><span style=display:flex><span> bidi-paragraph-direction <span style=color:#e6db74>&#39;left-to-right</span>
</span></span><span style=display:flex><span> <span style=color:#75715e>;; Speeds redisplay, may break paranthesis rendering for bidirectional files</span>
</span></span><span style=display:flex><span> bidi-inhibit-bpa <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><h3 id=directories>Directories</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defvar +biblio-notes-path (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;~/PhD/bibliography/notes/&#34;</span>))
</span></span><span style=display:flex><span>(defvar +biblio-styles-path (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;~/Zotero/styles/&#34;</span>))
</span></span><span style=display:flex><span>(defvar +biblio-storage-path (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;~/Zotero/storage/&#34;</span>))
</span></span><span style=display:flex><span>(defvar +biblio-libraries-path (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;~/Zotero/library.bib&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq org-directory <span style=color:#e6db74>&#34;~/Dropbox/Org/&#34;</span>
</span></span><span style=display:flex><span>      source-directory <span style=color:#e6db74>&#34;~/Softwares/aur/emacs-git/src/emacs-git/&#34;</span>)
</span></span></code></pre></div><h3 id=misc>Misc</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq +binary-hexl-enable <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      +binary-objdump-enable <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      browse-url-chromium-program (or (executable-find <span style=color:#e6db74>&#34;brave&#34;</span>)
</span></span><span style=display:flex><span>                                      (executable-find <span style=color:#e6db74>&#34;chromium&#34;</span>)
</span></span><span style=display:flex><span>                                      (executable-find <span style=color:#e6db74>&#34;chromium-browser&#34;</span>))
</span></span><span style=display:flex><span>      browse-url-chrome-program browse-url-chromium-program)
</span></span></code></pre></div><h3 id=awqat>Awqat</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(+lazy-when! (featurep <span style=color:#e6db74>&#39;me-lifestyle</span>)
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; Calendar settings (from `solar&#39;)</span>
</span></span><span style=display:flex><span>  (setq calendar-latitude <span style=color:#ae81ff>48.86</span>
</span></span><span style=display:flex><span>        calendar-longitude <span style=color:#ae81ff>2.35</span>
</span></span><span style=display:flex><span>        calendar-location-name <span style=color:#e6db74>&#34;Paris, FR&#34;</span>
</span></span><span style=display:flex><span>        calendar-time-display-form <span style=color:#f92672>&#39;</span>(24-hours <span style=color:#e6db74>&#34;:&#34;</span> minutes))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (awqat-display-prayer-time-mode <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>  (awqat-set-preset-french-muslims))
</span></span></code></pre></div><h3 id=projects>Projects</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(+lazy!
</span></span><span style=display:flex><span> (setq +project-scan-dir-paths
</span></span><span style=display:flex><span>       <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;~/PhD/papers/&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#e6db74>&#34;~/PhD/workspace/&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#e6db74>&#34;~/PhD/workspace-no/&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#e6db74>&#34;~/PhD/workspace-no/ez-wheel/swd-starter-kit-repo/&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#e6db74>&#34;~/Projects/foss/packages/&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#e6db74>&#34;~/Projects/foss/repos/&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> (+shutup!
</span></span><span style=display:flex><span>  (+project-scan-for-projects)))
</span></span></code></pre></div><h2 id=package-configuration>Package configuration</h2><h3 id=user-interface>User interface</h3><h4 id=theme-and-font>Theme & font</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq
</span></span><span style=display:flex><span> minemacs-theme <span style=color:#e6db74>&#39;doom-one-light</span> <span style=color:#75715e>; &#39;apropospriate-light</span>
</span></span><span style=display:flex><span> minemacs-fonts
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(:font-family <span style=color:#e6db74>&#34;Iosevka Fixed Curly Slab&#34;</span>
</span></span><span style=display:flex><span>   :font-size <span style=color:#ae81ff>13</span>
</span></span><span style=display:flex><span>   :variable-pitch-font-family <span style=color:#e6db74>&#34;IBM Plex Serif&#34;</span> <span style=color:#75715e>; &#34;Lato&#34;</span>
</span></span><span style=display:flex><span>   :variable-pitch-font-size <span style=color:#ae81ff>13</span>
</span></span><span style=display:flex><span>   :unicode-font-family <span style=color:#e6db74>&#34;JuliaMono&#34;</span>)) <span style=color:#75715e>; Default font for Unicode chars</span>
</span></span></code></pre></div><h4 id=writing-mode>Writing mode</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;me-writing-mode</span>
</span></span><span style=display:flex><span>  (setq +writing-mixed-pitch-enable <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>        +writing-text-scale <span style=color:#ae81ff>2.0</span>))
</span></span></code></pre></div><h3 id=completion-and-ide>Completion & IDE</h3><h4 id=lsp>LSP</h4><p>Register LSP over Tramp for Python using <code>pyls</code>. The <code>pyls</code> LSP server should be
installed on the distant machine for this to work.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;lsp-mode</span>
</span></span><span style=display:flex><span>  (lsp-register-client
</span></span><span style=display:flex><span>   (make-lsp-client
</span></span><span style=display:flex><span>    :new-connection (lsp-tramp-connection <span style=color:#e6db74>&#34;pyls&#34;</span>)
</span></span><span style=display:flex><span>    :major-modes <span style=color:#f92672>&#39;</span>(python-mode python-ts-mode)
</span></span><span style=display:flex><span>    :remote? <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>    :server-id <span style=color:#e6db74>&#39;pyls-remote</span>)))
</span></span></code></pre></div><h3 id=natural-languages>Natural languages</h3><h4 id=offline-dictionaries>Offline dictionaries</h4><p>Needs <code>sdcv</code> to be installed, needs also <em>StarDict</em> dictionaries, you can download
some from <a href=https://sites.google.com/site/gtonguedict/home/stardict-dictionaries>here</a> and <a href="https://polyglotte.tuxfamily.org/doku.php?id=donnees:dicos_bilingues">here</a> for french.</p><h4 id=spell-fu>Spell-fu</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;spell-fu</span>
</span></span><span style=display:flex><span>  (+spell-fu-register-dictionaries! <span style=color:#e6db74>&#34;en&#34;</span> <span style=color:#e6db74>&#34;fr&#34;</span>))
</span></span></code></pre></div><h2 id=applications>Applications</h2><h3 id=news-feed--elfeed>News feed (<code>elfeed</code>)</h3><p>Set RSS news feeds</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;elfeed</span>
</span></span><span style=display:flex><span>  (setq elfeed-feeds
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;https://arxiv.org/rss/cs.RO&#34;</span> robotics academic)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;https://interstices.info/feed&#34;</span> science academic)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;https://spectrum.ieee.org/rss/robotics/fulltext&#34;</span> robotics academic)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;https://spectrum.ieee.org/rss/aerospace/fulltext&#34;</span> academic aerospace)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;https://spectrum.ieee.org/rss/computing/fulltext&#34;</span> academic computing)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;https://spectrum.ieee.org/rss/blog/automaton/fulltext&#34;</span> academic automation robotics)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;https://www.technologyreview.com/feed&#34;</span> tech science)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;https://itsfoss.com/feed&#34;</span> linux foss)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;https://lwn.net/headlines/rss&#34;</span> linux foss)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;https://linuxhandbook.com/feed&#34;</span> linux foss)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;https://www.omgubuntu.co.uk/feed&#34;</span> linux foss)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;https://this-week-in-rust.org/rss.xml&#34;</span> rust prog)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;https://planet.emacslife.com/atom.xml&#34;</span> emacs prog foss)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;https://developers.redhat.com/blog/feed&#34;</span> linux foss))))
</span></span></code></pre></div><h3 id=email--mu4e>Email (<code>mu4e</code>)</h3><p>Configuring <code>mu4e</code> as email client needs three parts:</p><ul><li>Incoming mail configuration IMAP (using <code>mbsync</code>)</li><li>Outgoing mail configuration SMTP (using <code>smtpmail</code> or <code>msmtp</code>)</li><li>Email indexer and viewer (via <code>mu</code> and <code>mu4e</code>)</li></ul><h4 id=imap--mbsync>IMAP (<code>mbsync</code>)</h4><p>You will need to:</p><ul><li>Install <code>mu</code> and <code>isync</code> (<code>sudo pacman -S mu isync</code>)</li><li>Set up a proper configuration file for your accounts at <code>~/.mbsyncrc</code></li><li>Run <code>mu init --maildir=~/Maildir --my-address=user@host1 --my-address=user@host2</code></li><li>Run <code>mbsync -c ~/.mbsyncrc -a</code></li><li>For sending mails from <code>mu4e</code>, add a <code>~/.authinfo</code> file, file contains a line in
this format <code>machine MAIL.DOMAIN.TLD login USER port 587 password PASSWD</code></li><li>Encrypt the <code>~/.authinfo</code> file using GPG <code>gpg -c ~/.authinfo</code> and delete the
original unencrypted file.</li></ul><p>I use a <code>mbsyncrc</code> file for multi-accounts, with some hacks for Gmail accounts (to
rename the <code>[Gmail]/...</code> folders). Here is an explained configuration example.</p><p>In the configuration file, there is a parameter named <code>Pass</code> which should be set
to the password in plain text. Most of the examples you can find online uses
this parameter, but in real life, nobody uses it, it is extremely unsafe to put
the password in plain text configuration file. Instead, <code>mbsync</code> configuration
file provides the alternative <code>PassCmd</code> parameter, which can be set to an
arbitrary shell command which gets the password for you. You can set it for
example to call the <code>pass</code> password manager to output the account password, or to
<code>bw</code> command (for Bitwarden users). For me, I&rsquo;m using it with Emacs'
<code>~/.authinfo.gpg</code>, the <code>PassCmd</code> in my configuration uses GPG and <code>awk</code> to decrypt and
filter the file content to find the required account&rsquo;s password. I set <code>PassCmd</code>
to something like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>gpg -q --for-your-eyes-only --no-tty --logger-file /dev/null --batch -d ~/.authinfo.gpg | awk <span style=color:#e6db74>&#39;/machine smtp\.googlemail\.com login username@gmail\.com/ {print $NF}&#39;</span>
</span></span></code></pre></div><p>Remember the line format in the <code>~/.authinfo.gpg</code> file:</p><pre tabindex=0><code class=language-authinfo data-lang=authinfo>machine smtp.googlemail.com login username@gmail.com port 587 password PASSWD
</code></pre><p>This <code>PassCmd</code> command above, decrypts the <code>~/.authinfo.gpg</code>, passes it to <code>awk</code> to
search the line containing <code>"machine smtp.googlemail.com login username@gmail.com"</code> and prints the last field (the last field <code>$NF</code> in the <code>awk</code>
command corresponds to the password, as you can see in the line format).</p><p>The whole <code>~/.mbsync</code> file should look like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cfg data-lang=cfg><span style=display:flex><span><span style=color:#75715e># mbsync config file</span>
</span></span><span style=display:flex><span><span style=color:#75715e># GLOBAL OPTIONS</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>BufferLimit 50mb             # Global option:   Default buffer size is 10M, too small for modern machines.</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Sync All                     # Channels global: Sync everything &#34;Pull Push New ReNew Delete Flags&#34; (default option)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Create Both                  # Channels global: Automatically create missing mailboxes on both sides</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Expunge Both                 # Channels global: Delete messages marked for deletion on both sides</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>CopyArrivalDate yes          # Channels global: Propagate arrival time with the messages</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># SECTION (IMAP4 Accounts)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>IMAPAccount work             # IMAP Account name</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Host mail.host.ccc           # The host to connect to</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>User user@host.ccc           # Login user name</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>SSLVersions TLSv1.2 TLSv1.1  # Supported SSL versions</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Extract password from encrypted ~/.authinfo.gpg</span>
</span></span><span style=display:flex><span><span style=color:#75715e># File format: &#34;machine &lt;SERVER&gt; login &lt;LOGIN&gt; port &lt;PORT&gt; password &lt;PASSWORD&gt;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># This uses sed to extract &lt;PASSWORD&gt; from line matching the account&#39;s &lt;SERVER&gt;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PassCmd &#34;gpg2 -q --for-your-eyes-only --no-tty --logger-file /dev/null --batch -d ~/.authinfo.gpg | awk &#39;/machine smtp.domain.tld/ {print $NF}&#39;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>AuthMechs *                  # Authentication mechanisms</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>SSLType IMAPS                # Protocol (STARTTLS/IMAPS)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>CertificateFile /etc/ssl/certs/ca-certificates.crt</span>
</span></span><span style=display:flex><span><span style=color:#75715e># END OF SECTION</span>
</span></span><span style=display:flex><span><span style=color:#75715e># IMPORTANT NOTE: you need to keep the blank line after each section</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># SECTION (IMAP Stores)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>IMAPStore work-remote        # Remote storage name</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Account work                 # Associated account</span>
</span></span><span style=display:flex><span><span style=color:#75715e># END OF SECTION</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># SECTION (Maildir Stores)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>MaildirStore work-local      # Local storage (create directories with mkdir -p ~/Maildir/&lt;ACCOUNT-NAME&gt;)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Path ~/Maildir/work/         # The local store path</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Inbox ~/Maildir/work/Inbox   # Location of the INBOX</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>SubFolders Verbatim          # Download all sub-folders</span>
</span></span><span style=display:flex><span><span style=color:#75715e># END OF SECTION</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Connections specify links between remote and local folders</span>
</span></span><span style=display:flex><span><span style=color:#75715e># they are specified using patterns, which match remote mail</span>
</span></span><span style=display:flex><span><span style=color:#75715e># folders. Some commonly used patters include:</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># - &#34;*&#34; to match everything</span>
</span></span><span style=display:flex><span><span style=color:#75715e># - &#34;!DIR&#34; to exclude &#34;DIR&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># - &#34;DIR&#34; to match DIR</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># SECTION (Channels)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Channel work                 # Channel name</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Far :work-remote:            # Connect remote store</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Near :work-local:            # to the local one</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Patterns &#34;INBOX&#34; &#34;Drafts&#34; &#34;Sent&#34; &#34;Archives/*&#34; &#34;Spam&#34; &#34;Trash&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>SyncState *                  # Save state in near side mailbox file &#34;.mbsyncstate&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># END OF SECTION</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># =================================================================================</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>IMAPAccount gmail</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Host imap.gmail.com</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>User user@gmail.com</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PassCmd &#34;gpg2 -q --for-your-eyes-only --no-tty --logger-file /dev/null --batch -d ~/.authinfo.gpg | awk &#39;/machine smtp.domain.tld/ {print $NF}&#39;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>AuthMechs LOGIN</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>SSLType IMAPS</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>CertificateFile /etc/ssl/certs/ca-certificates.crt</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>IMAPStore gmail-remote</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Account gmail</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>MaildirStore gmail-local</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Path ~/Maildir/gmail/</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Inbox ~/Maildir/gmail/Inbox</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># For Gmail, I like to make multiple channels, one for each remote directory</span>
</span></span><span style=display:flex><span><span style=color:#75715e># this is a trick to rename remote &#34;[Gmail]/mailbox&#34; to &#34;mailbox&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Channel gmail-inbox</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Far :gmail-remote:</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Near :gmail-local:</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Patterns &#34;INBOX&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>SyncState *</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Channel gmail-trash</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Far :gmail-remote:&#34;[Gmail]/Trash&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Near :gmail-local:&#34;Trash&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>SyncState *</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Channel gmail-drafts</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Far :gmail-remote:&#34;[Gmail]/Drafts&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Near :gmail-local:&#34;Drafts&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>SyncState *</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Channel gmail-sent</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Far :gmail-remote:&#34;[Gmail]/Sent Mail&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Near :gmail-local:&#34;Sent Mail&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>SyncState *</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Channel gmail-all</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Far :gmail-remote:&#34;[Gmail]/All Mail&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Near :gmail-local:&#34;All Mail&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>SyncState *</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Channel gmail-starred</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Far :gmail-remote:&#34;[Gmail]/Starred&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Near :gmail-local:&#34;Starred&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>SyncState *</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Channel gmail-spam</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Far :gmail-remote:&#34;[Gmail]/Spam&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Near :gmail-local:&#34;Spam&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>SyncState *</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># GROUPS PUT TOGETHER CHANNELS, SO THAT WE CAN INVOKE</span>
</span></span><span style=display:flex><span><span style=color:#75715e># MBSYNC ON A GROUP TO SYNC ALL CHANNELS</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># FOR INSTANCE: &#34;mbsync gmail&#34; GETS MAIL FROM</span>
</span></span><span style=display:flex><span><span style=color:#75715e># &#34;gmail-inbox&#34;, &#34;gmail-sent&#34;, and &#34;gmail-trash&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># SECTION (Groups)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Group gmail</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Channel gmail-inbox</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Channel gmail-sent</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Channel gmail-trash</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Channel gmail-drafts</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Channel gmail-all</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Channel gmail-starred</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Channel gmail-spam</span>
</span></span><span style=display:flex><span><span style=color:#75715e># END OF SECTION</span>
</span></span></code></pre></div><h4 id=smtp--msmtp>SMTP (<code>msmtp</code>)</h4><p>I was using the standard <code>smtpmail</code> to send mails; but recently, I&rsquo;m getting
problems when sending mails. I passed a whole day trying to fix mail sending for
one of my accounts, at the end of the day, I got a working setup; BUT, sending
the first mail always ask me about password! I need to enter the password to be
able to send the mail, Emacs asks me then if I want to save it to
<code>~/.authifo.gpg</code>, when I confirm saving it, it got duplicated in the <code>.authinfo.gpg</code>
file.</p><p>This seems to be a bug; I also found somewhere that <code>smtpmail</code> is buggy, and that
<code>msmtp</code> seems to be a good alternative, so now I&rsquo;m using a <code>msmtp</code>-based setup, and
it works like a charm!</p><p>For this, we will need an additional configuration file, <code>~/.msmtprc</code>, I configure
it the same way as <code>mbsync</code>, specifying this time SMTP servers instead of IMAP
ones. I extract the passwords from <code>~/.authinfo.gpg</code> using GPG and <code>awk</code>, the same
way we did in <code>mbsync</code>&rsquo;s configuration.</p><p>The following is a sample file <code>~/.msmtprc</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cfg data-lang=cfg><span style=display:flex><span><span style=color:#75715e># Set default values for all following accounts.</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>defaults</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>auth                    on</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>tls                     on</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>tls_starttls            on</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>tls_trust_file          /etc/ssl/certs/ca-certificates.crt</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>logfile                 ~/.msmtp.log</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Gmail</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>account                 gmail</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>auth                    plain</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>host                    smtp.googlemail.com</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>port                    587</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>from                    username@gmail.com</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>user                    username</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>passwordeval            &#34;gpg -q --for-your-eyes-only --no-tty --logger-file /dev/null --batch -d ~/.authinfo.gpg | awk &#39;/machine smtp.googlemail.com login .*@gmail.com/ {print $NF}&#39;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>add_missing_date_header on</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Gmail - aliases</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>account                 alias-account : gmail</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>from                    alias@mail.com</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>account                 other-alias : gmail</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>from                    other.alias@address.org</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Work</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>account                 work</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>auth                    on</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>host                    smtp.domaine.tld</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>port                    587</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>from                    username@domaine.tld</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>user                    username</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>passwordeval            &#34;gpg -q --for-your-eyes-only --no-tty --logger-file /dev/null --batch -d ~/.authinfo.gpg | awk &#39;/machine smtp.domaine.tld/ {print $NF}&#39;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>tls_nocertcheck # ignore TLS certificate errors</span>
</span></span></code></pre></div><h4 id=mail-client-and-indexer--mu-and-mu4e>Mail client and indexer (<code>mu</code> and <code>mu4e</code>)</h4><p>I configure my email accounts in a private file in <code>private/mu4e-accounts.el</code>,
which will be loaded after this common part:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;mu4e</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; Custom files</span>
</span></span><span style=display:flex><span>  (setq mail-personal-alias-file (<span style=color:#a6e22e>concat</span> minemacs-config-dir <span style=color:#e6db74>&#34;private/mail-aliases.mailrc&#34;</span>)
</span></span><span style=display:flex><span>        mu4e-icalendar-diary-file (<span style=color:#a6e22e>concat</span> org-directory <span style=color:#e6db74>&#34;icalendar-diary.org&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; Add a unified inbox shortcut</span>
</span></span><span style=display:flex><span>  (add-to-list
</span></span><span style=display:flex><span>   <span style=color:#e6db74>&#39;mu4e-bookmarks</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(:name <span style=color:#e6db74>&#34;Unified inbox&#34;</span> :query <span style=color:#e6db74>&#34;maildir:/.*inbox/&#34;</span> :key <span style=color:#e6db74>?i</span>) <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; Add shortcut to view spam messages</span>
</span></span><span style=display:flex><span>  (add-to-list
</span></span><span style=display:flex><span>   <span style=color:#e6db74>&#39;mu4e-bookmarks</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(:name <span style=color:#e6db74>&#34;Spams&#34;</span> :query <span style=color:#e6db74>&#34;maildir:/.*\\(spam\\|junk\\).*/&#34;</span> :key <span style=color:#e6db74>?s</span>) <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; The `+mu4e-extras-ignore-spams-query&#39; function is defined in</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; `me-mu4e-extras&#39;.</span>
</span></span><span style=display:flex><span>  (with-eval-after-load <span style=color:#e6db74>&#39;me-mu4e-extras</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; Add shortcut to view yesterday&#39;s messages</span>
</span></span><span style=display:flex><span>    (add-to-list
</span></span><span style=display:flex><span>     <span style=color:#e6db74>&#39;mu4e-bookmarks</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>`</span>(:name <span style=color:#e6db74>&#34;Yesterday&#39;s messages&#34;</span> :query <span style=color:#f92672>,</span>(+mu4e-extras-ignore-spams-query <span style=color:#e6db74>&#34;date:1d..today&#34;</span>) :key <span style=color:#e6db74>?y</span>) <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; Load my accounts</span>
</span></span><span style=display:flex><span>  (+load minemacs-config-dir <span style=color:#e6db74>&#34;private/mu4e-accounts.el&#34;</span>)
</span></span><span style=display:flex><span>  (+load minemacs-config-dir <span style=color:#e6db74>&#34;private/mu4e-extra-commands.el&#34;</span>))
</span></span></code></pre></div><h3 id=calendar>Calendar</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;calfw-ical</span>
</span></span><span style=display:flex><span>  (+load minemacs-config-dir <span style=color:#e6db74>&#34;private/calfw-sources.el&#34;</span>))
</span></span></code></pre></div><p>I like to use an MPD powered EMMS, so when I restart Emacs I do not lose my
music.</p><h3 id=empv>EMPV</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;empv</span>
</span></span><span style=display:flex><span>  (setq
</span></span><span style=display:flex><span>   <span style=color:#75715e>;; Set the radio channels, you can get streams from https://www.radio-browser.info</span>
</span></span><span style=display:flex><span>   empv-radio-channels
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;El-Bahdja FM&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;http://webradio.tda.dz:8001/ElBahdja_64K.mp3&#34;</span>)
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;El-Chaabia&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;https://radio-dzair.net/proxy/chaabia?mp=/stream&#34;</span>)
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;Quran Radio&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;http://stream.radiojar.com/0tpy1h0kxtzuv&#34;</span>)
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;Algeria International&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;https://webradio.tda.dz/Internationale_64K.mp3&#34;</span>)
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;JOW Radio&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;https://str0.creacast.com/jowradio&#34;</span>)
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;Europe1&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;http://ais-live.cloud-services.paris:8000/europe1.mp3&#34;</span>)
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;France Iter&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;http://direct.franceinter.fr/live/franceinter-hifi.aac&#34;</span>)
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;France Info&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;http://direct.franceinfo.fr/live/franceinfo-hifi.aac&#34;</span>)
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;France Culture&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;http://icecast.radiofrance.fr/franceculture-hifi.aac&#34;</span>)
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;France Musique&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;http://icecast.radiofrance.fr/francemusique-hifi.aac&#34;</span>)
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;FIP&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;http://icecast.radiofrance.fr/fip-hifi.aac&#34;</span>)
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;Beur FM&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;http://broadcast.infomaniak.ch/beurfm-high.aac&#34;</span>)
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;Skyrock&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;http://icecast.skyrock.net/s/natio_mp3_128k&#34;</span>))
</span></span><span style=display:flex><span>   <span style=color:#75715e>;; See https://docs.invidious.io/instances/</span>
</span></span><span style=display:flex><span>   empv-invidious-instance <span style=color:#e6db74>&#34;https://invidious.projectsegfau.lt/api/v1&#34;</span>))
</span></span></code></pre></div><h2 id=programming>Programming</h2><h3 id=tramp>Tramp</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;tramp</span>
</span></span><span style=display:flex><span>  (setq
</span></span><span style=display:flex><span>   <span style=color:#75715e>;; Do not use a separate history file for tramp sessions (buggy!)</span>
</span></span><span style=display:flex><span>   tramp-histfile-override <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>   <span style=color:#75715e>;; Use Bash as a default remote shell</span>
</span></span><span style=display:flex><span>   tramp-default-remote-shell <span style=color:#e6db74>&#34;/bin/bash&#34;</span>
</span></span><span style=display:flex><span>   <span style=color:#75715e>;; Use bash for encoding and decoding commands on the local host</span>
</span></span><span style=display:flex><span>   tramp-encoding-shell <span style=color:#e6db74>&#34;/bin/bash&#34;</span>))
</span></span></code></pre></div><h3 id=robot-operating-system--ros>Robot Operating System (ROS)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;ros</span>
</span></span><span style=display:flex><span>  (setq ros-workspaces
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>list</span>
</span></span><span style=display:flex><span>         (ros-dump-workspace
</span></span><span style=display:flex><span>          :tramp-prefix <span style=color:#e6db74>&#34;/docker:ros@ros-machine:&#34;</span>
</span></span><span style=display:flex><span>          :workspace <span style=color:#e6db74>&#34;~/ros_ws&#34;</span>
</span></span><span style=display:flex><span>          :extends <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;/opt/ros/noetic/&#34;</span>))
</span></span><span style=display:flex><span>         (ros-dump-workspace
</span></span><span style=display:flex><span>          :tramp-prefix <span style=color:#e6db74>&#34;/docker:ros@ros-machine:&#34;</span>
</span></span><span style=display:flex><span>          :workspace <span style=color:#e6db74>&#34;~/ros2_ws&#34;</span>
</span></span><span style=display:flex><span>          :extends <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;/opt/ros/foxy/&#34;</span>))
</span></span><span style=display:flex><span>         (ros-dump-workspace
</span></span><span style=display:flex><span>          :tramp-prefix <span style=color:#e6db74>&#34;/ssh:swd_sk@172.16.96.42:&#34;</span>
</span></span><span style=display:flex><span>          :workspace <span style=color:#e6db74>&#34;~/ros_ws&#34;</span>
</span></span><span style=display:flex><span>          :extends <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;/opt/ros/noetic/&#34;</span>))
</span></span><span style=display:flex><span>         (ros-dump-workspace
</span></span><span style=display:flex><span>          :tramp-prefix <span style=color:#e6db74>&#34;/ssh:swd_sk@172.16.96.42:&#34;</span>
</span></span><span style=display:flex><span>          :workspace <span style=color:#e6db74>&#34;~/ros2_ws&#34;</span>
</span></span><span style=display:flex><span>          :extends <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;/opt/ros/foxy/&#34;</span>)))))
</span></span></code></pre></div><h2 id=office>Office</h2><h3 id=org-mode>Org mode</h3><h4 id=org-mode-tweaks>Org mode tweaks</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;org</span>
</span></span><span style=display:flex><span>  (setq
</span></span><span style=display:flex><span>   <span style=color:#75715e>;; Let&#39;s put our Org files here</span>
</span></span><span style=display:flex><span>   org-directory <span style=color:#e6db74>&#34;~/Dropbox/Org/&#34;</span>
</span></span><span style=display:flex><span>   <span style=color:#75715e>;; Do not ask before tangling</span>
</span></span><span style=display:flex><span>   org-confirm-babel-evaluate <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>   <span style=color:#75715e>;; The last level which is still exported as a headline</span>
</span></span><span style=display:flex><span>   org-export-headline-levels <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>   <span style=color:#75715e>;; Default file for notes (for org-capture)</span>
</span></span><span style=display:flex><span>   org-default-notes-file (<span style=color:#a6e22e>concat</span> org-directory <span style=color:#e6db74>&#34;inbox.org&#34;</span>)
</span></span><span style=display:flex><span>   +org-inbox-file (<span style=color:#a6e22e>concat</span> org-directory <span style=color:#e6db74>&#34;inbox.org&#34;</span>)
</span></span><span style=display:flex><span>   +org-projects-file (<span style=color:#a6e22e>concat</span> org-directory <span style=color:#e6db74>&#34;projects.org&#34;</span>)
</span></span><span style=display:flex><span>   <span style=color:#75715e>;; Custom todo keyword faces</span>
</span></span><span style=display:flex><span>   org-todo-keyword-faces
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;IDEA&#34;</span> <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;goldenrod&#34;</span> :weight bold))
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;NEXT&#34;</span> <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;IndianRed1&#34;</span> :weight bold))
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;STRT&#34;</span> <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;OrangeRed&#34;</span> :weight bold))
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;WAIT&#34;</span> <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;coral&#34;</span> :weight bold))
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;KILL&#34;</span> <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;DarkGreen&#34;</span> :weight bold))
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;PROJ&#34;</span> <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;LimeGreen&#34;</span> :weight bold))
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;HOLD&#34;</span> <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;orange&#34;</span> :weight bold)))
</span></span><span style=display:flex><span>   <span style=color:#75715e>;; Custom org-capture templates, see: https://orgmode.org/manual/Capture.html</span>
</span></span><span style=display:flex><span>   org-capture-templates
</span></span><span style=display:flex><span>   <span style=color:#f92672>`</span>((<span style=color:#e6db74>&#34;t&#34;</span> <span style=color:#e6db74>&#34;Todo&#34;</span> entry (file+headline <span style=color:#f92672>,</span>+org-inbox-file <span style=color:#e6db74>&#34;Inbox&#34;</span>)
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;* TODO %?\n%i\n%a&#34;</span>)
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;i&#34;</span> <span style=color:#e6db74>&#34;Idea&#34;</span> entry (file+headline <span style=color:#f92672>,</span>+org-inbox-file <span style=color:#e6db74>&#34;Ideas&#34;</span>)
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;* IDEA %?\n%T\n%i\n%a&#34;</span>)
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;p&#34;</span> <span style=color:#e6db74>&#34;Project note&#34;</span> entry (file <span style=color:#f92672>,</span>+org-projects-file)
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;* %?\n%T\n%i\n%a&#34;</span>)
</span></span><span style=display:flex><span>     (<span style=color:#e6db74>&#34;n&#34;</span> <span style=color:#e6db74>&#34;Note&#34;</span> entry (file+headline <span style=color:#f92672>,</span>+org-inbox-file <span style=color:#e6db74>&#34;Notes&#34;</span>)
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;* NOTE %?\n%T\n%i\n%a&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq org-tag-persistent-alist
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>((:startgroup <span style=color:#f92672>.</span> <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;home&#34;</span>      <span style=color:#f92672>.</span> <span style=color:#e6db74>?h</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;research&#34;</span>  <span style=color:#f92672>.</span> <span style=color:#e6db74>?r</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;work&#34;</span>      <span style=color:#f92672>.</span> <span style=color:#e6db74>?w</span>)
</span></span><span style=display:flex><span>          (:endgroup   <span style=color:#f92672>.</span> <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>          (:startgroup <span style=color:#f92672>.</span> <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;tool&#34;</span>      <span style=color:#f92672>.</span> <span style=color:#e6db74>?o</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;dev&#34;</span>       <span style=color:#f92672>.</span> <span style=color:#e6db74>?d</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;report&#34;</span>    <span style=color:#f92672>.</span> <span style=color:#e6db74>?p</span>)
</span></span><span style=display:flex><span>          (:endgroup   <span style=color:#f92672>.</span> <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>          (:startgroup <span style=color:#f92672>.</span> <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;easy&#34;</span>      <span style=color:#f92672>.</span> <span style=color:#e6db74>?e</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;medium&#34;</span>    <span style=color:#f92672>.</span> <span style=color:#e6db74>?m</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;hard&#34;</span>      <span style=color:#f92672>.</span> <span style=color:#e6db74>?a</span>)
</span></span><span style=display:flex><span>          (:endgroup   <span style=color:#f92672>.</span> <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;urgent&#34;</span>    <span style=color:#f92672>.</span> <span style=color:#e6db74>?u</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;key&#34;</span>       <span style=color:#f92672>.</span> <span style=color:#e6db74>?k</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;bonus&#34;</span>     <span style=color:#f92672>.</span> <span style=color:#e6db74>?b</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;ignore&#34;</span>    <span style=color:#f92672>.</span> <span style=color:#e6db74>?i</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;noexport&#34;</span>  <span style=color:#f92672>.</span> <span style=color:#e6db74>?x</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq org-tag-faces
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;home&#34;</span>     <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;goldenrod&#34;</span>  :weight bold))
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;research&#34;</span> <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;goldenrod&#34;</span>  :weight bold))
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;work&#34;</span>     <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;goldenrod&#34;</span>  :weight bold))
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;tool&#34;</span>     <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;IndianRed1&#34;</span> :weight bold))
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;dev&#34;</span>      <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;IndianRed1&#34;</span> :weight bold))
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;report&#34;</span>   <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;IndianRed1&#34;</span> :weight bold))
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;urgent&#34;</span>   <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;red&#34;</span>        :weight bold))
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;key&#34;</span>      <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;red&#34;</span>        :weight bold))
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;easy&#34;</span>     <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;green4&#34;</span>     :weight bold))
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;medium&#34;</span>   <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;orange&#34;</span>     :weight bold))
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;hard&#34;</span>     <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;red&#34;</span>        :weight bold))
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;bonus&#34;</span>    <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;goldenrod&#34;</span>  :weight bold))
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;ignore&#34;</span>   <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;Gray&#34;</span>       :weight bold))
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;noexport&#34;</span> <span style=color:#f92672>.</span> (:foreground <span style=color:#e6db74>&#34;LimeGreen&#34;</span>  :weight bold))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; stolen from https://github.com/yohan-pereira/.emacs#babel-config</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; (defun +org-confirm-babel-evaluate (lang body)</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;;   (not (string= lang &#34;scheme&#34;))) ;; Don&#39;t ask for scheme</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; (setq org-confirm-babel-evaluate #&#39;+org-confirm-babel-evaluate)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq org-agenda-files (<span style=color:#a6e22e>list</span> +org-inbox-file
</span></span><span style=display:flex><span>                               +org-projects-file
</span></span><span style=display:flex><span>                               (<span style=color:#a6e22e>concat</span> org-directory <span style=color:#e6db74>&#34;gcal-agenda.org&#34;</span>))
</span></span><span style=display:flex><span>        org-agenda-deadline-faces
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>1.001</span> <span style=color:#f92672>.</span> <span style=color:#a6e22e>error</span>)
</span></span><span style=display:flex><span>          (<span style=color:#ae81ff>1.000</span> <span style=color:#f92672>.</span> org-warning)
</span></span><span style=display:flex><span>          (<span style=color:#ae81ff>0.500</span> <span style=color:#f92672>.</span> org-upcoming-deadline)
</span></span><span style=display:flex><span>          (<span style=color:#ae81ff>0.000</span> <span style=color:#f92672>.</span> org-upcoming-distant-deadline))
</span></span><span style=display:flex><span>        org-list-demote-modify-bullet
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;+&#34;</span>  <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;-&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;-&#34;</span>  <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;+&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;*&#34;</span>  <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;+&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;1.&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;a.&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; Needs to make a src_latex{\textsc{text}}?, with this hack you can write [[latex:textsc][Some text]].</span>
</span></span><span style=display:flex><span>  (+shutup!
</span></span><span style=display:flex><span>   (org-add-link-type
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;latex&#34;</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>    (lambda (path desc <span style=color:#a6e22e>format</span>)
</span></span><span style=display:flex><span>      (cond
</span></span><span style=display:flex><span>       ((<span style=color:#a6e22e>eq</span> <span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#39;html</span>)
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;&lt;span class=\&#34;%s\&#34;&gt;%s&lt;/span&gt;&#34;</span> path desc))
</span></span><span style=display:flex><span>       ((<span style=color:#a6e22e>eq</span> <span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#39;latex</span>)
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;{\\%s{%s}}&#34;</span> path desc))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (add-hook
</span></span><span style=display:flex><span>   <span style=color:#e6db74>&#39;org-mode-hook</span>
</span></span><span style=display:flex><span>   (defun +org--time-stamp-setup-h ()
</span></span><span style=display:flex><span>     (setq-local
</span></span><span style=display:flex><span>      time-stamp-active <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      time-stamp-format <span style=color:#e6db74>&#34;%04Y-%02m-%02d&#34;</span>
</span></span><span style=display:flex><span>      time-stamp-start <span style=color:#e6db74>&#34;#\\+lastmod:[ \t]*&#34;</span>
</span></span><span style=display:flex><span>      time-stamp-end <span style=color:#e6db74>&#34;$&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (add-hook <span style=color:#e6db74>&#39;before-save-hook</span> <span style=color:#a6e22e>#&#39;</span>time-stamp))
</span></span></code></pre></div><h4 id=org-plus-hugo>Org + Hugo</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;ox-hugo</span>
</span></span><span style=display:flex><span>  (setq org-hugo-auto-set-lastmod <span style=color:#66d9ef>t</span>))
</span></span></code></pre></div><h4 id=org-plus-latex>Org + LaTeX</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;ox-latex</span>
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;org-latex-packages-alist</span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;svgnames&#34;</span> <span style=color:#e6db74>&#34;xcolor&#34;</span>)))
</span></span></code></pre></div><h4 id=org-roam>Org-roam</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq org-roam-directory <span style=color:#e6db74>&#34;~/Dropbox/Org/slip-box/&#34;</span>
</span></span><span style=display:flex><span>      org-roam-db-location (<span style=color:#a6e22e>concat</span> org-roam-directory <span style=color:#e6db74>&#34;org-roam.db&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;org-roam</span>
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;recentf-exclude</span> org-roam-directory)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (advice-add
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>#&#39;</span>doom-modeline-buffer-file-name
</span></span><span style=display:flex><span>   :around
</span></span><span style=display:flex><span>   (defun +doom-modeline--org-roam-buffer-file-name-a (orig-fun)
</span></span><span style=display:flex><span>     (if (string-search (<span style=color:#a6e22e>expand-file-name</span> org-roam-directory) (or <span style=color:#a6e22e>buffer-file-name</span> <span style=color:#e6db74>&#34;&#34;</span>))
</span></span><span style=display:flex><span>         (replace-regexp-in-string
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;\\(?:^\\|.*/\\)\\([0-9]\\{4\\}\\)\\([0-9]\\{2\\}\\)\\([0-9]\\{2\\}\\)[0-9]*-&#34;</span>
</span></span><span style=display:flex><span>          (<span style=color:#a6e22e>concat</span> (nerd-icons-codicon <span style=color:#e6db74>&#34;nf-cod-note&#34;</span>) <span style=color:#e6db74>&#34; (\\1-\\2-\\3) &#34;</span>)
</span></span><span style=display:flex><span>          (subst-char-in-string <span style=color:#e6db74>?_</span> <span style=color:#e6db74>? </span> <span style=color:#a6e22e>buffer-file-name</span>))
</span></span><span style=display:flex><span>       (<span style=color:#a6e22e>funcall</span> orig-fun)))))
</span></span></code></pre></div><h4 id=bibliography>Bibliography</h4><h5 id=org-cite>Org-cite</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;oc</span>
</span></span><span style=display:flex><span>  (setq org-cite-csl-styles-dir +biblio-styles-path
</span></span><span style=display:flex><span>        org-cite-global-bibliography (ensure-list +biblio-libraries-path)))
</span></span></code></pre></div><h5 id=citar>Citar</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;citar</span>
</span></span><span style=display:flex><span>  (setq citar-library-paths (ensure-list +biblio-storage-path)
</span></span><span style=display:flex><span>        citar-notes-paths (ensure-list +biblio-notes-path)
</span></span><span style=display:flex><span>        citar-bibliography (ensure-list +biblio-libraries-path)))
</span></span></code></pre></div><h3 id=text-editing>Text editing</h3><h4 id=helper-commands>Helper commands</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun +helper--in-buffer-replace (old new)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Replace OLD with NEW in the current buffer.&#34;</span>
</span></span><span style=display:flex><span>  (save-excursion
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>goto-char</span> (<span style=color:#a6e22e>point-min</span>))
</span></span><span style=display:flex><span>    (let ((case-fold-search <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>          (matches <span style=color:#ae81ff>0</span>))
</span></span><span style=display:flex><span>      (while (<span style=color:#a6e22e>re-search-forward</span> old <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>replace-match</span> new)
</span></span><span style=display:flex><span>        (cl-incf matches))
</span></span><span style=display:flex><span>      matches)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun +helper-clear-frenchy-ponctuations ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Replace french ponctuations (like unsectable space) by regular ones.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (let ((chars
</span></span><span style=display:flex><span>         <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;[\u00a0\u200b]&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;&#34;</span>) <span style=color:#75715e>;; Non-breaking and zero-width spaces</span>
</span></span><span style=display:flex><span>           <span style=color:#75715e>;; Special spaces and quads</span>
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;[\u2000-\u200A\u202F\u205F\u3000]&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34; &#34;</span>)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;[]&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;&#39;&#34;</span>)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;[]&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\&#34;&#34;</span>)))
</span></span><span style=display:flex><span>        (matches <span style=color:#ae81ff>0</span>))
</span></span><span style=display:flex><span>    (dolist (pair chars)
</span></span><span style=display:flex><span>      (cl-incf matches (+helper--in-buffer-replace (<span style=color:#a6e22e>car</span> pair) (<span style=color:#a6e22e>cdr</span> pair))))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;Replaced %d match%s.&#34;</span> matches (if (<span style=color:#a6e22e>&gt;</span> matches <span style=color:#ae81ff>1</span>) <span style=color:#e6db74>&#34;es&#34;</span> <span style=color:#e6db74>&#34;&#34;</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun +yank-region-as-paragraph ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Yank region as one paragraph. This removes new line characters between lines.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (when (use-region-p)
</span></span><span style=display:flex><span>    (let ((text (<span style=color:#a6e22e>buffer-substring-no-properties</span> (<span style=color:#a6e22e>region-beginning</span>) (<span style=color:#a6e22e>region-end</span>))))
</span></span><span style=display:flex><span>      (with-temp-buffer
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>insert</span> text)
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>goto-char</span> (<span style=color:#a6e22e>point-min</span>))
</span></span><span style=display:flex><span>        (let ((case-fold-search <span style=color:#66d9ef>nil</span>))
</span></span><span style=display:flex><span>          (while (<span style=color:#a6e22e>re-search-forward</span> <span style=color:#e6db74>&#34;\n[^\n]&#34;</span> <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>            (replace-region-contents
</span></span><span style=display:flex><span>             (<span style=color:#a6e22e>-</span> (<span style=color:#a6e22e>point</span>) <span style=color:#ae81ff>2</span>) (<span style=color:#a6e22e>-</span> (<span style=color:#a6e22e>point</span>) <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>             (lambda (<span style=color:#66d9ef>&amp;optional</span> a b) <span style=color:#e6db74>&#34; &#34;</span>)))
</span></span><span style=display:flex><span>          (kill-new (<span style=color:#a6e22e>buffer-string</span>)))))))
</span></span></code></pre></div><h2 id=system-configuration>System configuration</h2><h3 id=mime-types>Mime types</h3><h4 id=org-mode-files>Org mode files</h4><p>Org mode isn&rsquo;t recognized as its own mime type by default, but that can easily
be changed with the following file. For system-wide changes try
<code>/usr/share/mime/packages/org.xml</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;mime-info</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#39;http://www.freedesktop.org/standards/shared-mime-info&#39;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;mime-type</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;text/org&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;comment&gt;</span>Emacs Org-mode File<span style=color:#f92672>&lt;/comment&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;glob</span> <span style=color:#a6e22e>pattern=</span><span style=color:#e6db74>&#34;*.org&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;alias</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;text/org&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/mime-type&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/mime-info&gt;</span>
</span></span></code></pre></div><p>What&rsquo;s nice is that Papirus <a href=https://github.com/PapirusDevelopmentTeam/papirus-icon-theme/commit/a10fb7f2423d5e30b9c4477416ccdc93c4f3849d>now</a> has an icon for <code>text/org</code>. One simply needs to
refresh their mime database:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>update-mime-database ~/.local/share/mime
</span></span></code></pre></div><p>Then set Emacs as the default editor:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>xdg-mime default emacs-client.desktop text/org
</span></span></code></pre></div><h4 id=registering-org-protocol>Registering <code>org-protocol://</code></h4><p>The recommended method of registering a protocol is by registering a desktop
application, which seems reasonable.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cfg data-lang=cfg><span style=display:flex><span><span style=color:#66d9ef>[Desktop Entry]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Name</span><span style=color:#f92672>=</span><span style=color:#e6db74>Emacs Org-Protocol</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Exec</span><span style=color:#f92672>=</span><span style=color:#e6db74>emacsclient %u</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>/home/hacko/.doom.d/assets/org-mode.svg</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Type</span><span style=color:#f92672>=</span><span style=color:#e6db74>Application</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Terminal</span><span style=color:#f92672>=</span><span style=color:#e6db74>false</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>MimeType</span><span style=color:#f92672>=</span><span style=color:#e6db74>x-scheme-handler/org-protocol</span>
</span></span></code></pre></div><p>To associate <code>org-protocol://</code> links with the desktop file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>xdg-mime default org-protocol.desktop x-scheme-handler/org-protocol
</span></span></code></pre></div><h4 id=configuring-chrome-brave>Configuring Chrome/Brave</h4><p>As specified in the <a href=https://www.orgroam.com/manual.html#org_002droam_002dprotocol>official documentation</a>, we would like to invoke the
<code>org-protocol://</code> without confirmation. To do this, we need to add this
system-wide configuration.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;Do you want to set Chrome/Brave to show the &#39;Always open ...&#39; checkbox, to be used with the &#39;org-protocol://&#39; registration? [Y | N]: &#34;</span> INSTALL_CONFIRM
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> <span style=color:#e6db74>&#34;</span>$INSTALL_CONFIRM<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Y&#34;</span> <span style=color:#f92672>]]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  sudo mkdir -p /etc/opt/chrome/policies/managed/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  sudo tee /etc/opt/chrome/policies/managed/external_protocol_dialog.json &gt; /dev/null <span style=color:#e6db74>&lt;&lt;&#39;EOF&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  &#34;ExternalProtocolDialogShowAlwaysOpenCheckbox&#34;: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  sudo chmod <span style=color:#ae81ff>644</span> /etc/opt/chrome/policies/managed/external_protocol_dialog.json
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><p>Then add a bookmarklet in your browser with this code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>javascript</span><span style=color:#f92672>:</span><span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>href</span> <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;org-protocol://roam-ref?template=r&amp;ref=&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>+</span> encodeURIComponent(<span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>href</span>)
</span></span><span style=display:flex><span>    <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;&amp;title=&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>+</span> encodeURIComponent(document.<span style=color:#a6e22e>title</span>)
</span></span><span style=display:flex><span>    <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;&amp;body=&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>+</span> encodeURIComponent(window.<span style=color:#a6e22e>getSelection</span>())
</span></span></code></pre></div><h3 id=git>Git</h3><h4 id=git-diffs>Git diffs</h4><p>Based on this <a href=https://gist.github.com/ruediger/5647207>gist</a> and <a href=https://protesilaos.com/codelog/2021-01-26-git-diff-hunk-elisp-org/>this article</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cfg data-lang=cfg><span style=display:flex><span><span style=color:#a6e22e>*.tex                         diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>tex</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.bib                         diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>bibtex</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.{c,h,c++,h++,cc,hh,cpp,hpp} diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>cpp</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.m                           diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>matlab</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.py                          diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>python</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.rb                          diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>ruby</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.php                         diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>php</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.pl                          diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>perl</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.{html,xhtml}                diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>html</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.f                           diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>fortran</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.{el,lisp,scm}               diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>lisp</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.r                           diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>rstats</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.texi*                       diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>texinfo</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.org                         diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>org</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.rs                          diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>rust</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.odt                         diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>odt</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.odp                         diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>libreoffice</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.ods                         diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>libreoffice</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.doc                         diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>doc</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.xls                         diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>xls</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.ppt                         diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>ppt</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.docx                        diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>docx</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.xlsx                        diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>xlsx</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.pptx                        diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>pptx</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.rtf                         diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>rtf</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.{png,jpg,jpeg,gif}          diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>exif</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.pdf                         diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>pdf</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.djvu                        diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>djvu</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.epub                        diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>pandoc</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.chm                         diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>tika</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.mhtml?                      diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>tika</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.{class,jar}                 diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>tika</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>*.{rar,7z,zip,apk}            diff</span><span style=color:#f92672>=</span><span style=color:#e6db74>tika</span>
</span></span></code></pre></div><p>Then adding some regular expressions for it to <code>~/.config/git/config</code>, with some
tools to view diffs on binary files.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cfg data-lang=cfg><span style=display:flex><span><span style=color:#75715e># ====== TEXT FORMATS ======</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;org&#34;]</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xfuncname</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;^(\\*+ +.*)$&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;lisp&#34;]</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xfuncname</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;^(\\(.*)$&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;rstats&#34;]</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xfuncname</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;^([a-zA-z.]+ &lt;- function.*)$&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;texinfo&#34;]</span>
</span></span><span style=display:flex><span><span style=color:#75715e># from http://git.savannah.gnu.org/gitweb/?p=coreutils.git;a=blob;f=.gitattributes;h=c3b2926c78c939d94358cc63d051a70d38cfea5d;hb=HEAD</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xfuncname</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;^@node[ \t][ \t]*\\([^,][^,]*\\)&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;rust&#34;]</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xfuncname</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;^[ \t]*(pub|)[ \t]*((fn|struct|enum|impl|trait|mod)[^;]*)$&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ====== BINARY FORMATS ======</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;pdf&#34;]</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>binary</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>true</span>
</span></span><span style=display:flex><span><span style=color:#75715e># textconv = pdfinfo</span>
</span></span><span style=display:flex><span><span style=color:#75715e># textconv = sh -c &#39;pdftotext &#34;$@&#34; -&#39; # sudo apt install pdftotext</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textconv</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>sh -c &#39;pdftotext -layout &#34;$0&#34; -enc UTF-8 -nopgbrk -q -&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  cachetextconv = true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;djvu&#34;]</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>binary</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>true</span>
</span></span><span style=display:flex><span><span style=color:#75715e># textconv = pdfinfo</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textconv</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>djvutxt # yay -S djvulibre
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  cachetextconv = true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;odt&#34;]</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textconv</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>odt2txt</span>
</span></span><span style=display:flex><span><span style=color:#75715e># textconv = pandoc --standalone --from=odt --to=plain</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>binary</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  cachetextconv = true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;doc&#34;]</span>
</span></span><span style=display:flex><span><span style=color:#75715e># textconv = wvText</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textconv</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>catdoc # yay -S catdoc
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  binary = true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  cachetextconv = true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;xls&#34;]</span>
</span></span><span style=display:flex><span><span style=color:#75715e># textconv = in2csv</span>
</span></span><span style=display:flex><span><span style=color:#75715e># textconv = xlscat -a UTF-8</span>
</span></span><span style=display:flex><span><span style=color:#75715e># textconv = soffice --headless --convert-to csv</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textconv</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>xls2csv # yay -S catdoc
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  binary = true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  cachetextconv = true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;ppt&#34;]</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textconv</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>catppt # yay -S catdoc
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  binary = true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  cachetextconv = true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;docx&#34;]</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textconv</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>pandoc --standalone --from=docx --to=plain</span>
</span></span><span style=display:flex><span><span style=color:#75715e># textconv = sh -c &#39;docx2txt.pl &#34;$0&#34; -&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>binary</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  cachetextconv = true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;xlsx&#34;]</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textconv</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>xlsx2csv # pip install xlsx2csv</span>
</span></span><span style=display:flex><span><span style=color:#75715e># textconv = in2csv</span>
</span></span><span style=display:flex><span><span style=color:#75715e># textconv = soffice --headless --convert-to csv</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>binary</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  cachetextconv = true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;pptx&#34;]</span>
</span></span><span style=display:flex><span><span style=color:#75715e># pip install --user pptx2md (currently not wotking with Python 3.10)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># textconv = sh -c &#39;pptx2md --disable_image --disable_wmf -i &#34;$0&#34; -o ~/.cache/git/presentation.md &gt;/dev/null &amp;&amp; cat ~/.cache/git/presentation.md&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Alternative hack, convert PPTX to PPT, then use the catppt tool</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textconv</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>sh -c &#39;soffice --headless --convert-to ppt --outdir /tmp &#34;$0&#34; &amp;&amp; TMP_FILENAME=$(basename -- &#34;$0&#34;) &amp;&amp; catppt &#34;/tmp/${TMP_FILENAME%.*}.ppt&#34;&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  binary = true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  cachetextconv = true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;rtf&#34;]</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textconv</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>unrtf --text # yay -S unrtf
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  binary = true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  cachetextconv = true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;epub&#34;]</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textconv</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>pandoc --standalone --from=epub --to=plain
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  binary = true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  cachetextconv = true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;tika&#34;]</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textconv</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>tika --config=~/.local/share/tika/tika-conf.xml --text
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  binary = true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  cachetextconv = true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;libreoffice&#34;]</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textconv</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>soffice --cat
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  binary = true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  cachetextconv = true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[diff &#34;exif&#34;]</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>binary</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  textconv = exiftool # sudo apt install perl-image-exiftool</span>
</span></span></code></pre></div><h4 id=extensions>Extensions</h4><p>This tool is taken from <a href=https://gist.github.com/nottrobin/5758221>https://gist.github.com/nottrobin/5758221</a>. It is
attributed to David Underhill. It is a script to permanently delete
files/folders from a Git repository. To use it, cd to your repository&rsquo;s root,
then run the script with a list of paths you want to delete, e.g.,
<code>git-prune-files path1 path2</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>set -o errexit
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $# -eq <span style=color:#ae81ff>0</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;Usage: git prune-files &lt;path1&gt; [&lt;path2&gt; ...]&#34;</span> 1&gt;&amp;<span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>    exit <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># make sure we&#39;re at the root of git repo</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> ! -d .git <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;Error: must run this script from the root of a git repository&#34;</span> 1&gt;&amp;<span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>    exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># remove all paths passed as arguments from the history of the repo</span>
</span></span><span style=display:flex><span>files<span style=color:#f92672>=</span>$@
</span></span><span style=display:flex><span>git filter-branch --index-filter <span style=color:#e6db74>&#34;git rm -rf --cached --ignore-unmatch </span>$files<span style=color:#e6db74>&#34;</span> HEAD
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># remove the temporary history git-filter-branch otherwise leaves behind for a long time</span>
</span></span><span style=display:flex><span>rm -rf .git/refs/original/ <span style=color:#f92672>&amp;&amp;</span> git reflog expire --all <span style=color:#f92672>&amp;&amp;</span> git gc --aggressive --prune
</span></span></code></pre></div><h3 id=apache-tika-app-wrapper>Apache Tika App wrapper</h3><p><strong>Apache Tika</strong> is a content detection and analysis framework. It detects and
extracts metadata and text from over a thousand different file types. We will be
using the Tika App in command-line mode to show some meaningful diff information
for some binary files.</p><p>First, let&rsquo;s add a custom script to run <code>tika-app</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/bin/sh
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>APACHE_TIKA_JAR<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/.local/share/tika/tika-app.jar&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -f <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>APACHE_TIKA_JAR<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  exec java -Dfile.encoding<span style=color:#f92672>=</span>UTF-8 -jar <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>APACHE_TIKA_JAR<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span> 2&gt;/dev/null
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;JAR file not found at </span><span style=color:#e6db74>${</span>APACHE_TIKA_JAR<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><p>Add <code>tika</code>&rsquo;s installation instructions to the <code>setup.sh</code> file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>update_apache_tika <span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  TIKA_JAR_PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/.local/share/tika&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> ! -d <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TIKA_JAR_PATH<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    mkdir -p <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TIKA_JAR_PATH<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  TIKA_BASE_URL<span style=color:#f92672>=</span>https://archive.apache.org/dist/tika/
</span></span><span style=display:flex><span>  TIKA_JAR_LINK<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TIKA_JAR_PATH<span style=color:#e6db74>}</span><span style=color:#e6db74>/tika-app.jar&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  echo -n <span style=color:#e6db74>&#34;Checking for new Apache Tika App version... &#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Get the lastest version</span>
</span></span><span style=display:flex><span>  TIKA_VERSION<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>
</span></span><span style=display:flex><span>    curl -s <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TIKA_BASE_URL<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> | <span style=color:#75715e># Get the page</span>
</span></span><span style=display:flex><span>    pandoc -f html -t plain | <span style=color:#75715e># Convert HTML page to plain text.</span>
</span></span><span style=display:flex><span>    awk <span style=color:#e6db74>&#39;/([0-9]+\.)+[0-1]\// {print substr($1, 0, length($1)-1)}&#39;</span> | <span style=color:#75715e># Get the versions directories (pattern: X.X.X/)</span>
</span></span><span style=display:flex><span>    sort -rV | <span style=color:#75715e># Sort versions, the newest first</span>
</span></span><span style=display:flex><span>    head -n <span style=color:#ae81ff>1</span> <span style=color:#75715e># Get the first (newest) version</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -z <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TIKA_VERSION<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;Failed, check your internet connection.&#34;</span>
</span></span><span style=display:flex><span>    exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;Lastest version is </span><span style=color:#e6db74>${</span>TIKA_VERSION<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  TIKA_JAR<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TIKA_JAR_PATH<span style=color:#e6db74>}</span><span style=color:#e6db74>/tika-app-</span><span style=color:#e6db74>${</span>TIKA_VERSION<span style=color:#e6db74>}</span><span style=color:#e6db74>.jar&#34;</span>
</span></span><span style=display:flex><span>  TIKA_JAR_URL<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TIKA_BASE_URL<span style=color:#e6db74>}${</span>TIKA_VERSION<span style=color:#e6db74>}</span><span style=color:#e6db74>/tika-app-</span><span style=color:#e6db74>${</span>TIKA_VERSION<span style=color:#e6db74>}</span><span style=color:#e6db74>.jar&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> ! -f <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TIKA_JAR<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;New version available!&#34;</span>
</span></span><span style=display:flex><span>    read -p <span style=color:#e6db74>&#34;Do you want to download Apache Tika App v</span><span style=color:#e6db74>${</span>TIKA_VERSION<span style=color:#e6db74>}</span><span style=color:#e6db74>? [Y | N]: &#34;</span> INSTALL_CONFIRM
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> <span style=color:#e6db74>&#34;</span>$INSTALL_CONFIRM<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Y&#34;</span> <span style=color:#f92672>]]</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>      curl -o <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TIKA_JAR<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TIKA_JAR_URL<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>&amp;&amp;</span> echo <span style=color:#e6db74>&#34;Apache Tika App v</span><span style=color:#e6db74>${</span>TIKA_VERSION<span style=color:#e6db74>}</span><span style=color:#e6db74> downloaded successfully&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;Apache Tika App is up-to-date, version </span><span style=color:#e6db74>${</span>TIKA_VERSION<span style=color:#e6db74>}</span><span style=color:#e6db74> already downloaded to &#39;</span><span style=color:#e6db74>${</span>TIKA_JAR<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Check the existance of the symbolic link</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -L <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TIKA_JAR_LINK<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    unlink <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TIKA_JAR_LINK<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Create a symbolic link to the installed version</span>
</span></span><span style=display:flex><span>  ln -s <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TIKA_JAR<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TIKA_JAR_LINK<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>update_apache_tika;
</span></span></code></pre></div><p>When it detects that Tesseract is installed, Tika App will try to extract text
from some file types. For some reason, it tries to use Tesseract with some
compressed files like <code>*.bz2</code>, <code>*.apk</code>&mldr; etc. I would like to disable this feature
by exporting an XML config file which will be used when launching the Tika App
(using <code>--config=&lt;tika-config.xml></code>).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;properties&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;parsers&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;parser</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;org.apache.tika.parser.DefaultParser&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;parser-exclude</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;org.apache.tika.parser.ocr.TesseractOCRParser&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/parser&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/parsers&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/properties&gt;</span>
</span></span></code></pre></div><h3 id=command-line-wrapper>Command-line wrapper</h3><p>A wrapper around <code>emacsclient</code>:</p><ul><li>Accepting <code>stdin</code> by putting it in a temporary file and immediately opening it.</li><li>Guessing that the <code>tty</code> is a good idea when <code>$DISPLAY</code> is unset (relevant with SSH
sessions, among other things).</li><li>With a whiff of 24-bit color support, sets <code>TERM</code> variable to a <code>terminfo</code> that
(probably) announces 24-bit color support.</li><li>Changes GUI <code>emacsclient</code> instances to be non-blocking by default (<code>--no-wait</code>),
and instead take a flag to suppress this behavior (<code>-w</code>).</li></ul><p>I would use <code>sh</code>, but using arrays for argument manipulation is just too
convenient, so I&rsquo;ll raise the requirement to <code>bash</code>. Since arrays are the only
&rsquo;extra&rsquo; compared to <code>sh</code>, other shells like <code>ksh</code> etc. should work too.</p><p></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>force_tty<span style=color:#f92672>=</span>false
</span></span><span style=display:flex><span>force_wait<span style=color:#f92672>=</span>false
</span></span><span style=display:flex><span>stdin_mode<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>args<span style=color:#f92672>=()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>usage <span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  echo -e <span style=color:#e6db74>&#34;Usage: e [-t] [-m MODE] [OPTIONS] FILE [-]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Emacs client convenience wrapper.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Options:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>-h, --help            Show this message
</span></span></span><span style=display:flex><span><span style=color:#e6db74>-t, -nw, --tty        Force terminal mode
</span></span></span><span style=display:flex><span><span style=color:#e6db74>-w, --wait            Don&#39;t supply --no-wait to graphical emacsclient
</span></span></span><span style=display:flex><span><span style=color:#e6db74>-                     Take stdin (when last argument)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>-m MODE, --mode MODE  Mode to open stdin with
</span></span></span><span style=display:flex><span><span style=color:#e6db74>-mm, --maximized      Start Emacs client in maximized window
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Run emacsclient --help to see help for the emacsclient.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> :
</span></span><span style=display:flex><span><span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> in
</span></span><span style=display:flex><span>    -t | -nw | --tty<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      force_tty<span style=color:#f92672>=</span>true
</span></span><span style=display:flex><span>      shift ;;
</span></span><span style=display:flex><span>    -w | --wait<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      force_wait<span style=color:#f92672>=</span>true
</span></span><span style=display:flex><span>      shift ;;
</span></span><span style=display:flex><span>    -m | --mode<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      stdin_mode<span style=color:#f92672>=</span><span style=color:#e6db74>&#34; (</span>$2<span style=color:#e6db74>-mode)&#34;</span>
</span></span><span style=display:flex><span>      shift <span style=color:#ae81ff>2</span> ;;
</span></span><span style=display:flex><span>    -mm | --maximized<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        args<span style=color:#f92672>+=(</span><span style=color:#e6db74>&#34;--frame-parameters=&#39;(fullscreen . maximized)&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        shift ;;
</span></span><span style=display:flex><span>    -h | --help<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      usage
</span></span><span style=display:flex><span>      exit <span style=color:#ae81ff>0</span> ;;
</span></span><span style=display:flex><span>    --*<span style=color:#f92672>=</span>*<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      set -- <span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>1%%=*<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>1#*=<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>      shift ;;
</span></span><span style=display:flex><span>    *<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span>$#<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> break
</span></span><span style=display:flex><span>      args<span style=color:#f92672>+=(</span><span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      shift ;;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>esac</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> ! <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${#</span>args[*]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>args[-1]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;-&#34;</span> <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  unset <span style=color:#e6db74>&#39;args[-1]&#39;</span>
</span></span><span style=display:flex><span>  TMP<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>mktemp /tmp/emacsstdin-XXX<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  cat &gt; <span style=color:#e6db74>&#34;</span>$TMP<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  args<span style=color:#f92672>+=(</span>--eval <span style=color:#e6db74>&#34;(let ((b (generate-new-buffer \&#34;*stdin*\&#34;))) (switch-to-buffer b) (insert-file-contents \&#34;</span>$TMP<span style=color:#e6db74>\&#34;) (delete-file \&#34;</span>$TMP<span style=color:#e6db74>\&#34;)</span><span style=color:#e6db74>${</span>stdin_mode<span style=color:#e6db74>}</span><span style=color:#e6db74>)&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -z <span style=color:#e6db74>&#34;</span>$DISPLAY<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>||</span> $force_tty
</span></span><span style=display:flex><span><span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># detect terminals with sneaky 24-bit support</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#f92672>{</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span>$COLORTERM<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span> truecolor <span style=color:#f92672>]</span> <span style=color:#f92672>||</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span>$COLORTERM<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span> 24bit <span style=color:#f92672>]</span>; <span style=color:#f92672>}</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>tput colors 2&gt;/dev/null<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span> -lt <span style=color:#ae81ff>257</span> <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> echo <span style=color:#e6db74>&#34;</span>$TERM<span style=color:#e6db74>&#34;</span> | grep -q <span style=color:#e6db74>&#34;^\w\+-[0-9]&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>      termstub<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TERM%%-*<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>      termstub<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TERM#*-<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> infocmp <span style=color:#e6db74>&#34;</span>$termstub<span style=color:#e6db74>-direct&#34;</span> &gt;/dev/null 2&gt;&amp;<span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>      TERM<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$termstub<span style=color:#e6db74>-direct&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>      TERM<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;xterm-direct&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fi</span> <span style=color:#75715e># should be fairly safe</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  emacsclient --tty -create-frame --alternate-editor<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/usr/bin/emacs&#34;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>args[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> ! $force_wait
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    args<span style=color:#f92672>+=(</span>--no-wait<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  emacsclient -create-frame --alternate-editor<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/usr/bin/emacs&#34;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>args[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><h5 id=useful-aliases>Useful aliases</h5><p>Now, to set an alias to use <code>e</code> with <code>magit</code>, and then for maximum laziness we can
set aliases for the terminal-forced variants.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># -*- mode: sh; -*-</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Aliases to run emacs+magit</span>
</span></span><span style=display:flex><span>alias magit<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;e --eval &#34;(progn (magit-status) (delete-other-windows))&#34;&#39;</span>
</span></span><span style=display:flex><span>alias magitt<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;e -t --eval &#34;(progn (magit-status) (delete-other-windows))&#34;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Aliases to run emacs+mu4e</span>
</span></span><span style=display:flex><span>alias emu<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;e --eval &#34;(progn (=mu4e) (delete-other-windows))&#34;&#39;</span>
</span></span><span style=display:flex><span>alias emut<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;e -t --eval &#34;(progn (=mu4e) (delete-other-windows))&#34;&#39;</span>
</span></span></code></pre></div><p>And this to launch Emacs in terminal mode <code>et</code>, I use this as a default <code>$EDITOR</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>e -t <span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><p>And <code>ev</code> for use with <code>$VISUAL</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>e -w <span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>export EDITOR<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/.local/bin/et&#34;</span>
</span></span><span style=display:flex><span>export VISUAL<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/.local/bin/ev&#34;</span>
</span></span></code></pre></div><h3 id=appimage>AppImage</h3><p>Install/update the <code>appimageupdatetool.AppImage</code> tool:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>update_appimageupdatetool <span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  TOOL_NAME<span style=color:#f92672>=</span>appimageupdatetool
</span></span><span style=display:flex><span>  MACHINE_ARCH<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>uname -m<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>  APPIMAGE_UPDATE_TOOL_PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/.local/bin/</span><span style=color:#e6db74>${</span>TOOL_NAME<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  APPIMAGE_UPDATE_TOOL_URL<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://github.com/AppImage/AppImageUpdate/releases/download/continuous/</span><span style=color:#e6db74>${</span>TOOL_NAME<span style=color:#e6db74>}</span><span style=color:#e6db74>-</span><span style=color:#e6db74>${</span>MACHINE_ARCH<span style=color:#e6db74>}</span><span style=color:#e6db74>.AppImage&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -f <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>APPIMAGE_UPDATE_TOOL_PATH<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#e6db74>&#34;</span>$APPIMAGE_UPDATE_TOOL_PATH<span style=color:#e6db74>&#34;</span> -j <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>APPIMAGE_UPDATE_TOOL_PATH<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> 2&amp;&gt;/dev/null
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TOOL_NAME<span style=color:#e6db74>}</span><span style=color:#e6db74> already up to date&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -f <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>APPIMAGE_UPDATE_TOOL_PATH<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>      echo <span style=color:#e6db74>&#34;Update available, downloading latest </span><span style=color:#e6db74>${</span>MACHINE_ARCH<span style=color:#e6db74>}</span><span style=color:#e6db74> version to </span><span style=color:#e6db74>${</span>APPIMAGE_UPDATE_TOOL_PATH<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>      mv <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>APPIMAGE_UPDATE_TOOL_PATH<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>APPIMAGE_UPDATE_TOOL_PATH<span style=color:#e6db74>}</span><span style=color:#e6db74>.backup&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>      echo <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TOOL_NAME<span style=color:#e6db74>}</span><span style=color:#e6db74> not found, downloading latest </span><span style=color:#e6db74>${</span>MACHINE_ARCH<span style=color:#e6db74>}</span><span style=color:#e6db74> version to </span><span style=color:#e6db74>${</span>APPIMAGE_UPDATE_TOOL_PATH<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>    wget -O <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>APPIMAGE_UPDATE_TOOL_PATH<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>APPIMAGE_UPDATE_TOOL_URL<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#75715e># 2&amp;&gt;/dev/null</span>
</span></span><span style=display:flex><span>        echo <span style=color:#e6db74>&#34;Downloaded </span><span style=color:#e6db74>${</span>TOOL_NAME<span style=color:#e6db74>}</span><span style=color:#e6db74>-</span><span style=color:#e6db74>${</span>MACHINE_ARCH<span style=color:#e6db74>}</span><span style=color:#e6db74>.AppImage&#34;</span> <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[</span> -f <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>APPIMAGE_UPDATE_TOOL_PATH<span style=color:#e6db74>}</span><span style=color:#e6db74>.backup&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>        rm <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>APPIMAGE_UPDATE_TOOL_PATH<span style=color:#e6db74>}</span><span style=color:#e6db74>.backup&#34;</span>
</span></span><span style=display:flex><span>    chmod a+x <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>APPIMAGE_UPDATE_TOOL_PATH<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>update_appimageupdatetool;
</span></span></code></pre></div><h3 id=oh-my-zsh>Oh-my-Zsh</h3><h4 id=path>Path</h4><p>Path to your oh-my-zsh installation.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>export ZSH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/.oh-my-zsh&#34;</span>
</span></span></code></pre></div><h4 id=themes-and-customization>Themes and customization</h4><p>Set name of the theme to load, if set to <code>"random"</code>, it will load a random theme
each time oh-my-zsh is loaded, in which case, to know which specific one was
loaded, run: <code>echo $RANDOM_THEME</code> See <a href=https://github.com/ohmyzsh/ohmyzsh/wiki/Themes>github.com/ohmyzsh/ohmyzsh/wiki/Themes</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Typewritten customizations</span>
</span></span><span style=display:flex><span>TYPEWRITTEN_RELATIVE_PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;adaptive&#34;</span>
</span></span><span style=display:flex><span>TYPEWRITTEN_CURSOR<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;underscore&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ZSH_THEME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;typewritten/typewritten&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Set list of themes to pick from when loading at random</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Setting this variable when ZSH_THEME=random will cause zsh to load</span>
</span></span><span style=display:flex><span><span style=color:#75715e># a theme from this variable instead of looking in $ZSH/themes/</span>
</span></span><span style=display:flex><span><span style=color:#75715e># If set to an empty array, this variable will have no effect.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ZSH_THEME_RANDOM_CANDIDATES=( &#34;robbyrussell&#34; &#34;agnoster&#34; )</span>
</span></span></code></pre></div><h4 id=behavior>Behavior</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Uncomment the following line to use case-sensitive completion.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># CASE_SENSITIVE=&#34;true&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Uncomment the following line to use hyphen-insensitive completion.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Case-sensitive completion must be off. _ and - will be interchangeable.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># HYPHEN_INSENSITIVE=&#34;true&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Uncomment the following line to disable bi-weekly auto-update checks.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># DISABLE_AUTO_UPDATE=&#34;true&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Uncomment the following line to automatically update without prompting.</span>
</span></span><span style=display:flex><span>DISABLE_UPDATE_PROMPT<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;true&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Uncomment the following line to change how often to auto-update (in days).</span>
</span></span><span style=display:flex><span>export UPDATE_ZSH_DAYS<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Uncomment the following line if pasting URLs and other text is messed up.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># DISABLE_MAGIC_FUNCTIONS=&#34;true&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Uncomment the following line to disable colors in ls.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># DISABLE_LS_COLORS=&#34;true&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Uncomment the following line to disable auto-setting terminal title.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># DISABLE_AUTO_TITLE=&#34;true&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Uncomment the following line to enable command auto-correction.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ENABLE_CORRECTION=&#34;true&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Uncomment the following line to display red dots whilst waiting for completion.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># COMPLETION_WAITING_DOTS=&#34;true&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Uncomment the following line if you want to disable marking untracked files</span>
</span></span><span style=display:flex><span><span style=color:#75715e># under VCS as dirty. This makes repository status check for large repositories</span>
</span></span><span style=display:flex><span><span style=color:#75715e># much, much faster.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># DISABLE_UNTRACKED_FILES_DIRTY=&#34;true&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Uncomment the following line if you want to change the command execution time</span>
</span></span><span style=display:flex><span><span style=color:#75715e># stamp shown in the history command output.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># You can set one of the optional three formats:</span>
</span></span><span style=display:flex><span><span style=color:#75715e># &#34;mm/dd/yyyy&#34;|&#34;dd.mm.yyyy&#34;|&#34;yyyy-mm-dd&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># or set a custom format using the strftime function format specifications,</span>
</span></span><span style=display:flex><span><span style=color:#75715e># see &#39;man strftime&#39; for details.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># HIST_STAMPS=&#34;mm/dd/yyyy&#34;</span>
</span></span></code></pre></div><h4 id=plugins>Plugins</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Would you like to use another custom folder than $ZSH/custom?</span>
</span></span><span style=display:flex><span>ZSH_CUSTOM<span style=color:#f92672>=</span>$HOME/.config/my_ohmyzsh_customizations
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Which plugins would you like to load?</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Standard plugins can be found in $ZSH/plugins/</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Custom plugins may be added to $ZSH_CUSTOM/plugins/</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Example format: plugins=(rails git textmate ruby lighthouse)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Add wisely, as too many plugins slow down shell startup.</span>
</span></span><span style=display:flex><span>plugins<span style=color:#f92672>=(</span>
</span></span><span style=display:flex><span>  zsh-autosuggestions
</span></span><span style=display:flex><span>  zsh-navigation-tools
</span></span><span style=display:flex><span>  zsh-interactive-cd
</span></span><span style=display:flex><span>  archlinux
</span></span><span style=display:flex><span>  ssh-agent
</span></span><span style=display:flex><span>  sudo
</span></span><span style=display:flex><span>  docker
</span></span><span style=display:flex><span>  systemd
</span></span><span style=display:flex><span>  tmux
</span></span><span style=display:flex><span>  python
</span></span><span style=display:flex><span>  pip
</span></span><span style=display:flex><span>  rust
</span></span><span style=display:flex><span>  repo
</span></span><span style=display:flex><span>  cp
</span></span><span style=display:flex><span>  rsync
</span></span><span style=display:flex><span>  ripgrep
</span></span><span style=display:flex><span>  fzf
</span></span><span style=display:flex><span>  fd
</span></span><span style=display:flex><span>  z
</span></span><span style=display:flex><span><span style=color:#f92672>)</span>
</span></span></code></pre></div><h4 id=bootstrap-oh-my-zsh>Bootstrap Oh-my-Zsh</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>source $ZSH/oh-my-zsh.sh
</span></span></code></pre></div><h4 id=aliases>Aliases</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Aliases</span>
</span></span><span style=display:flex><span>alias zshconfig<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;vim ~/.zshrc&#34;</span>
</span></span><span style=display:flex><span>alias ohmyzsh<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ranger </span>$ZSH<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><h3 id=zsh-user-configuration>Zsh user configuration</h3><h4 id=pbcopy-and-pbpaste><code>pbcopy</code> and <code>pbpaste</code></h4><p>I like to define MacOS-like commands (<code>pbcopy</code> and <code>pbpaste</code>) to copy and paste in
terminal (from <code>stdin</code>, to <code>stdout</code>). The <code>pbcopy</code> and <code>pbpaste</code> are defined using
either <code>xclip</code> or <code>xsel</code>, you would need to install these tools, otherwise we wouldn&rsquo;t
define the aliases.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Define aliases to &#39;pbcopy&#39; and &#39;pbpaste&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> command -v xclip &amp;&gt; /dev/null
</span></span><span style=display:flex><span><span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Define aliases using xclip</span>
</span></span><span style=display:flex><span>  alias pbcopy<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;xclip -selection clipboard&#39;</span>
</span></span><span style=display:flex><span>  alias pbpaste<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;xclip -selection clipboard -o&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>elif</span> command -v xsel &amp;&gt; /dev/null
</span></span><span style=display:flex><span><span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Define aliases using xsel</span>
</span></span><span style=display:flex><span>  alias pbcopy<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;xsel --clipboard --input&#39;</span>
</span></span><span style=display:flex><span>  alias pbpaste<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;xsel --clipboard --output&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><h4 id=netpaste><code>netpaste</code></h4><p>Define a <code>netpaste</code> command to paste to a Pastebin server.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>alias netpaste<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;curl -F file=@- 0x0.st&#39;</span> <span style=color:#75715e># OR &#39;curl -F f:1=&lt;- ix.io &#39;</span>
</span></span></code></pre></div><h4 id=sudo-gui>Sudo GUI!</h4><p>And then define <code>gsuon</code> and <code>gsuoff</code> aliases to run graphical apps from terminal
with root permissions, this requires <code>xhost</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># To run GUI apps from terminal with root permissions</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> command -v xhost &amp;&gt; /dev/null
</span></span><span style=display:flex><span><span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  alias gsuon<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;xhost si:localuser:root&#39;</span>
</span></span><span style=display:flex><span>  alias gsuoff<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;xhost -si:localuser:root&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><h4 id=neovim>Neovim</h4><p>Use Neovim instead of VIM to provide <code>vi</code> and <code>vim</code> commands.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># NeoVim</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> command -v nvim &amp;&gt; /dev/null
</span></span><span style=display:flex><span><span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  alias vim<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;nvim&#34;</span>
</span></span><span style=display:flex><span>  alias vi<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;nvim&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><h4 id=esp-idf>ESP-IDF</h4><p>Add some aliases to work with the <a href=https://github.com/espressif/esp-idf.git>ESP-IDF</a> framework.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -d <span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/Softwares/src/esp-idf/&#34;</span> <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  alias esp-prepare-env<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;source $HOME/Softwares/src/esp-idf/export.sh&#39;</span>
</span></span><span style=display:flex><span>  alias esp-update<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;echo &#34;Updating ESP-IDF framework...&#34; &amp;&amp; cd $HOME/src/esp-idf &amp;&amp; git pull --all &amp;&amp; echo &#34;Updated successfully&#34;&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>  alias esp-prepare-env<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;echo &#34;esp-idf repo not found. You can clone the esp-idf repo using git clone https://github.com/espressif/esp-idf.git&#34;&#39;</span>
</span></span><span style=display:flex><span>  alias esp-update<span style=color:#f92672>=</span>esp-prepare-env
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><h4 id=cli-wttrin-client>CLI wttrin client</h4><p>Define an alias to get weather information for my city:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>alias wttrin<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;curl wttr.in/$WTTRIN_CITY&#39;</span>
</span></span><span style=display:flex><span>alias wttrin2<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;curl v2.wttr.in/$WTTRIN_CITY&#39;</span>
</span></span></code></pre></div><h4 id=minicom>Minicom</h4><p>Enable Meta key and colors in <code>minicom</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>export MINICOM<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;-m -c on&#39;</span>
</span></span></code></pre></div><h4 id=rust>Rust</h4><p>Define Rust sources path, and add packages installed from <code>cargo</code> to the <code>PATH</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>export RUST_SRC_PATH<span style=color:#f92672>=</span>$HOME/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/src/
</span></span><span style=display:flex><span>export PATH<span style=color:#f92672>=</span>$PATH:$HOME/.cargo/bin
</span></span></code></pre></div><p>I&rsquo;m using the AUR package <code>clang-format-static-bin</code>, which provide multiple
versions of Clang-format, I use it with some work projects requiring a specific
version of Clang-format.</p><h4 id=clang-format>Clang-format</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#f92672>[</span> -d /opt/clang-format-static <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> export PATH<span style=color:#f92672>=</span>$PATH:/opt/clang-format-static
</span></span></code></pre></div><h4 id=cmake>CMake</h4><p>Add my manually built libraries to CMake and <code>PATH</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>export CMAKE_PREFIX_PATH<span style=color:#f92672>=</span>$HOME/Softwares/src/install
</span></span><span style=display:flex><span>export PATH<span style=color:#f92672>=</span>$PATH:$HOME/Softwares/src/install/bin
</span></span></code></pre></div><h4 id=node>Node</h4><p>Set NPM installation path to local:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>NPM_PACKAGES<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>HOME<span style=color:#e6db74>}</span><span style=color:#e6db74>/.npm-packages&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Export NPM bin path</span>
</span></span><span style=display:flex><span>export PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$PATH<span style=color:#e6db74>:</span>$NPM_PACKAGES<span style=color:#e6db74>/bin&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Preserve MANPATH if you already defined it somewhere in your config.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Otherwise, fall back to `manpath` so we can inherit from `/etc/manpath`.</span>
</span></span><span style=display:flex><span>export MANPATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>MANPATH-<span style=color:#66d9ef>$(</span>manpath<span style=color:#66d9ef>)</span><span style=color:#e6db74>}</span><span style=color:#e6db74>:</span>$NPM_PACKAGES<span style=color:#e6db74>/share/man&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Tell Node about these packages</span>
</span></span><span style=display:flex><span>export NODE_PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$NPM_PACKAGES<span style=color:#e6db74>/lib/node_modules:</span>$NODE_PATH<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><p>Tell NPM to use this directory for its global package installs by adding this
in <code>~/.npmrc</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cfg data-lang=cfg><span style=display:flex><span><span style=color:#a6e22e>prefix</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>~/.npm-packages</span>
</span></span></code></pre></div><p>Some useful stuff (<code>fzf</code>, <code>opam</code>, Doom Emacs&mldr;)</p><h4 id=tmux>tmux</h4><p>I like to use <code>tmux</code> by default, even on my local sessions, I like to start a <code>tmux</code>
in a <code>default</code> session on the first time I launch a terminal, and then, attach any
other terminal to this default session:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># If not running inside Emacs (via vterm/eshell...)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -z $INSIDE_EMACS <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> command -v tmux &amp;&gt; /dev/null <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>[</span> -z <span style=color:#e6db74>&#34;</span>$TMUX<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    tmux attach -t default <span style=color:#f92672>||</span> tmux new -s default
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><h4 id=other-stuff>Other stuff</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># You may need to manually set your language environment</span>
</span></span><span style=display:flex><span><span style=color:#75715e># export LANG=en_US.UTF-8</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Preferred editor for local and remote sessions</span>
</span></span><span style=display:flex><span><span style=color:#75715e># if [[ -n $SSH_CONNECTION ]]; then</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#   export EDITOR=&#39;vim&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># else</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#   export EDITOR=&#39;mvim&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Compilation flags</span>
</span></span><span style=display:flex><span><span style=color:#75715e># export ARCHFLAGS=&#34;-arch x86_64&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># FZF</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> -f ~/.fzf.zsh <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> source ~/.fzf.zsh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># OPAM configuration</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[[</span> ! -r $HOME/.opam/opam-init/init.zsh <span style=color:#f92672>]]</span> <span style=color:#f92672>||</span> source $HOME/.opam/opam-init/init.zsh &gt; /dev/null 2&gt; /dev/null
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Add ~/.config/emacs/bin to path (for DOOM Emacs stuff)</span>
</span></span><span style=display:flex><span>export PATH<span style=color:#f92672>=</span>$PATH:$HOME/.config/emacs/bin
</span></span></code></pre></div><p>Define some environment variables.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>source ~/.zshrc_private
</span></span></code></pre></div><p>Load my <code>bitwarden-cli</code> session, exported to <code>BW_SESSION</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#f92672>[</span> -f ~/.bitwarden-session <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> source ~/.bitwarden-session
</span></span></code></pre></div><h3 id=rust-format>Rust format</h3><p>For Rust code base, the file <code>$HOME/.rustfmt.toml</code> contains the global format
settings, I like to set it to:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#75715e># Rust edition 2018</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>edition</span> = <span style=color:#e6db74>&#34;2018&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Use Unix style newlines, with 2 spaces tabulation.</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>newline_style</span> = <span style=color:#e6db74>&#34;Unix&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>tab_spaces</span> = <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>hard_tabs</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Make one line functions in a single line</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>fn_single_line</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Format strings</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>format_strings</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Increase the max line width</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>max_width</span> = <span style=color:#ae81ff>120</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Merge nested imports</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>merge_imports</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Enum and Struct alignement</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>enum_discrim_align_threshold</span> = <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>struct_field_align_threshold</span> = <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Reorder impl items: type &gt; const &gt; macros &gt; methods.</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>reorder_impl_items</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Comments and documentation formating</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>wrap_comments</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>normalize_comments</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>normalize_doc_attributes</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>format_code_in_doc_comments</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>report_fixme</span> = <span style=color:#e6db74>&#34;Always&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>todo</span> = <span style=color:#e6db74>&#34;Always&#34;</span>
</span></span></code></pre></div><h3 id=ecryptfs>eCryptfs</h3><h4 id=unlock-and-mount-script>Unlock and mount script</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/bin/sh -e
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e># This script mounts a user&#39;s confidential private folder</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Original by Michael Halcrow, IBM</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Extracted to a stand-alone script by Dustin Kirkland &lt;kirkland@ubuntu.com&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Modified by: Abdelhak Bougouffa &lt;abougouffa@fedoraproject.org&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># This script:</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#  * interactively prompts for a user&#39;s wrapping passphrase (defaults to their</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#    login passphrase)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#  * checks it for validity</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#  * unwraps a users mount passphrase with their supplied wrapping passphrase</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#  * inserts the mount passphrase into the keyring</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#  * and mounts a user&#39;s encrypted private folder</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>PRIVATE_DIR<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Private&#34;</span>
</span></span><span style=display:flex><span>PW_ATTEMPTS<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>MESSAGE<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>gettext <span style=color:#e6db74>&#34;Enter your login passphrase:&#34;</span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -f $HOME/.ecryptfs/wrapping-independent <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># use a wrapping passphrase different from the login passphrase</span>
</span></span><span style=display:flex><span>  MESSAGE<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>gettext <span style=color:#e6db74>&#34;Enter your wrapping passphrase:&#34;</span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>WRAPPED_PASSPHRASE_FILE<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/.ecryptfs/wrapped-passphrase&#34;</span>
</span></span><span style=display:flex><span>MOUNT_PASSPHRASE_SIG_FILE<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/.ecryptfs/</span>$PRIVATE_DIR<span style=color:#e6db74>.sig&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># First, silently try to perform the mount, which would succeed if the appropriate</span>
</span></span><span style=display:flex><span><span style=color:#75715e># key is available in the keyring</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> /sbin/mount.ecryptfs_private &gt;/dev/null 2&gt;&amp;<span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  exit <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Otherwise, interactively prompt for the user&#39;s password</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -f <span style=color:#e6db74>&#34;</span>$WRAPPED_PASSPHRASE_FILE<span style=color:#e6db74>&#34;</span> -a -f <span style=color:#e6db74>&#34;</span>$MOUNT_PASSPHRASE_SIG_FILE<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  tries<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>while</span> <span style=color:#f92672>[</span> $tries -lt $PW_ATTEMPTS <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    LOGINPASS<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>zenity --password --title <span style=color:#e6db74>&#34;eCryptFS: </span>$MESSAGE<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> <span style=color:#66d9ef>$(</span>wc -l &lt; <span style=color:#e6db74>&#34;</span>$MOUNT_PASSPHRASE_SIG_FILE<span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>)</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;1&#34;</span> <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># No filename encryption; only insert fek</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> printf <span style=color:#e6db74>&#34;%s\0&#34;</span> <span style=color:#e6db74>&#34;</span>$LOGINPASS<span style=color:#e6db74>&#34;</span> | ecryptfs-unwrap-passphrase <span style=color:#e6db74>&#34;</span>$WRAPPED_PASSPHRASE_FILE<span style=color:#e6db74>&#34;</span> - | ecryptfs-add-passphrase -
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>        break
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>        zenity --error --title <span style=color:#e6db74>&#34;eCryptfs&#34;</span> --text <span style=color:#e6db74>&#34;Error: Your passphrase is incorrect&#34;</span>
</span></span><span style=display:flex><span>        tries<span style=color:#f92672>=</span><span style=color:#66d9ef>$((</span>$tries <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> printf <span style=color:#e6db74>&#34;%s\0&#34;</span> <span style=color:#e6db74>&#34;</span>$LOGINPASS<span style=color:#e6db74>&#34;</span> | ecryptfs-insert-wrapped-passphrase-into-keyring <span style=color:#e6db74>&#34;</span>$WRAPPED_PASSPHRASE_FILE<span style=color:#e6db74>&#34;</span> -
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>        break
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>        zenity --error --title <span style=color:#e6db74>&#34;eCryptfs&#34;</span> --text <span style=color:#e6db74>&#34;Error: Your passphrase is incorrect&#34;</span>
</span></span><span style=display:flex><span>        tries<span style=color:#f92672>=</span><span style=color:#66d9ef>$((</span>$tries <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $tries -ge $PW_ATTEMPTS <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    zenity --error --title <span style=color:#e6db74>&#34;eCryptfs&#34;</span> --text <span style=color:#e6db74>&#34;Too many incorrect password attempts, exiting&#34;</span>
</span></span><span style=display:flex><span>    exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  /sbin/mount.ecryptfs_private
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>  zenity --error --title <span style=color:#e6db74>&#34;eCryptfs&#34;</span> --text <span style=color:#e6db74>&#34;Encrypted private directory is not setup properly&#34;</span>
</span></span><span style=display:flex><span>  exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> grep -qs <span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/.Private </span>$PWD<span style=color:#e6db74> ecryptfs &#34;</span> /proc/mounts 2&gt;/dev/null; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  zenity --info --title <span style=color:#e6db74>&#34;eCryptfs&#34;</span> --text <span style=color:#e6db74>&#34;Your private directory has been mounted.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>dolphin <span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/Private&#34;</span>
</span></span><span style=display:flex><span>exit <span style=color:#ae81ff>0</span>
</span></span></code></pre></div><h4 id=desktop-integration>Desktop integration</h4><pre tabindex=0><code class=language-conf-unix data-lang=conf-unix>[Desktop Entry]
Type=Application
Version=1.0
Name=eCryptfs Unlock Private Directory
Icon=unlock
Exec=/home/hacko/.ecryptfs/ecryptfs-mount-private-gui
Terminal=False
</code></pre><h3 id=gdb>GDB</h3><h4 id=early-init>Early init</h4><p>I like to disable the initial message (containing copyright info and other
stuff), the right way to do this is either by starting <code>gdb</code> with <code>-q</code> option, or
(since GDB v11 I think), by setting in
<code>~/.gdbearlyinit</code>.</p><pre tabindex=0><code class=language-gdb-script data-lang=gdb-script># GDB early init file
# Abdelhak Bougouffa (c) 2022

# Disable showing the initial message
set startup-quietly
</code></pre><h4 id=init>Init</h4><p>GDB loads <code>$HOME/.gdbinit</code> at startup, I like to define some default options in
this file, this is a WIP, but it won&rsquo;t evolve too much, as <a href="https://youtu.be/-n9Fkq1e6sg?t=3377">it is recommended to
keep the <code>.gdbinit</code> clean and simple</a>. For the moment, it does just enable pretty
printing, and defines the <code>c</code> and <code>n</code> commands to wrap <code>continue</code> and <code>next</code> with a post
<code>refresh</code>, which is helpful with the annoying TUI when the program outputs to the
stdout.</p><pre tabindex=0><code class=language-gdb-script data-lang=gdb-script># GDB init file
# Abdelhak Bougouffa (c) 2022

# Save history
set history save on
set history filename ~/.gdb_history
set history remove-duplicates 2048

# When debugging my apps, debug information of system libraries
# aren&#39;t that important
set debuginfod enabled off

# Set pretty print
set print pretty on

# I hate stepping into system libraries when I&#39;m debugging my
# crappy stuff, so lets add system headers to skipped files
skip pending on
python
import os

# Add paths here, they will be explored recursivly
LIB_PATHS = [&#34;/usr/include&#34; &#34;/usr/local/include&#34;]

for lib_path in LIB_PATHS:
  for root, dirs, files in os.walk(lib_path):
    for file in files:
      cmd = f&#34;skip file {os.path.join(root, file)}&#34;
      gdb.execute(cmd, True, to_string=True)
end
skip enable

skip pending on
guile
&lt;&lt;gdb-init-guile&gt;&gt;
end
skip enable

# This fixes the annoying ncurses TUI gliches and saves typing C-l each time to refresh the screen
define cc
  continue
  refresh
end

define nn
  next
  refresh
end
</code></pre><p></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scheme data-lang=scheme></code></pre></div><h3 id=gnupg>GnuPG</h3><p>I add this to my <code>~/.gnupg/gpg-agent.conf</code>, to set the time-to-live to one day.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cfg data-lang=cfg><span style=display:flex><span><span style=color:#75715e># Do not ask me about entered passwords for 24h (during the same session)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>default-cache-ttl 86400</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>max-cache-ttl 86400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># As I&#39;m using KDE, use Qt based pinentry tool instead of default GTK+</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>pinentry-program /usr/bin/pinentry-qt</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Allow pinentry in Emacs minibuffer (combined with epg-pinentry-mode)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>allow-loopback-pinentry</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>allow-emacs-pinentry</span>
</span></span></code></pre></div><h3 id=ocr-this>OCR This</h3><p>This creates a script named <code>ocrthis</code> that can be bound to OS shortcut. When
triggered:</p><ul><li>it shows a selection tool to take a partial screenshot,</li><li>it runs <code>tesseract</code> to extract the text,</li><li>and then, it copies it to clipboard.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>IMG<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>mktemp -u --suffix<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;.png&#34;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>scrot -s <span style=color:#e6db74>&#34;</span>$IMG<span style=color:#e6db74>&#34;</span> -q <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>mogrify -modulate 100,0 -resize 400% <span style=color:#e6db74>&#34;</span>$IMG<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>tesseract <span style=color:#e6db74>&#34;</span>$IMG<span style=color:#e6db74>&#34;</span> - -l eng 2&gt; /dev/null | xsel -ib
</span></span></code></pre></div><h3 id=slack>Slack</h3><p>This script is called at system startup.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>WEEK_DAY<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>date +%u<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>HOUR<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>date +%H<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>SLACK<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>which slack<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> ! <span style=color:#e6db74>&#34;</span>$WEEK_DAY<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;6&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>[</span> ! <span style=color:#e6db74>&#34;</span>$WEEK_DAY<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;7&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span>$HOUR<span style=color:#e6db74>&#34;</span> -gt <span style=color:#ae81ff>7</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span>$HOUR<span style=color:#e6db74>&#34;</span> -lt <span style=color:#ae81ff>18</span> <span style=color:#f92672>]</span> ; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  $SLACK -u %U
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;It is not work time!&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><h3 id=arch-linux-packages>Arch Linux packages</h3><p>Here, we install Arch packages</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>check_and_install_pkg<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    PKG_NAME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> ! pacman -Qiq <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>PKG_NAME<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> &amp;&gt;/dev/null; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>        echo <span style=color:#e6db74>&#34;Package </span><span style=color:#e6db74>${</span>PKG_NAME<span style=color:#e6db74>}</span><span style=color:#e6db74> is missing, installing it using yay&#34;</span>
</span></span><span style=display:flex><span>        yay -S <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>PKG_NAME<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>PKGS_LIST<span style=color:#f92672>=(</span>
</span></span><span style=display:flex><span>    git ripgrep fd gnupg fzf the_silver_searcher
</span></span><span style=display:flex><span>    ttf-ibm-plex ttf-fira-code ttf-roboto-mono ttf-overpass ttf-lato ttf-input
</span></span><span style=display:flex><span>    ttf-cascadia-code ttf-jetbrains-mono ttf-fantasque-sans-mono
</span></span><span style=display:flex><span>    ttc-iosevka ttf-iosevka-nerd ttc-iosevka-slab ttc-iosevka-curly
</span></span><span style=display:flex><span>    ttc-iosevka-curly-slab ttc-iosevka-etoile ttc-iosevka-ss09
</span></span><span style=display:flex><span>    ccls cppcheck clang gcc gdb lldb valgrind rr openocd
</span></span><span style=display:flex><span>    sbcl cmucl clisp chez-scheme mit-scheme chibi-scheme chicken
</span></span><span style=display:flex><span>    vls vlang rustup semgrep-bin
</span></span><span style=display:flex><span>    mu isync msmtp xsel xorg-xhost
</span></span><span style=display:flex><span>    mpc mpv mpd vlc yt-dlp
</span></span><span style=display:flex><span>    maxima fricas octave scilab-bin graphviz jupyterlab jupyter-notebook r
</span></span><span style=display:flex><span>    djvulibre catdoc unrtf perl-image-exiftool wkhtmltopdf
</span></span><span style=display:flex><span>    chezmoi neovim repo ecryptfs-utils
</span></span><span style=display:flex><span>    pandoc hugo inkscape imagemagick
</span></span><span style=display:flex><span>    aspell aspell-en aspell-fr aspell-ar grammalecte language-tool ltex-ls-bin
</span></span><span style=display:flex><span>    libvterm brave zotero bitwarden-cli binutils
</span></span><span style=display:flex><span>    poppler ffmpegthumbnailer mediainfo imagemagick tar unzip
</span></span><span style=display:flex><span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> PKG in <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>PKGS_LIST[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    check_and_install_pkg <span style=color:#e6db74>&#34;</span>$PKG<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><h3 id=kde-plasma>KDE Plasma</h3><p>On KDE, there is a good support for HiDPI displays, however, I faced annoying
small icons in some contexts (for example, a right click on desktop). <a href="https://www.reddit.com/r/kde/comments/o8bb4s/comment/h33z7bp/?utm_source=share&amp;utm_medium=web2x&amp;context=3">This can
be fixed</a> by setting <code>PLASMA_USE_QT_SCALING=1</code> before starting KDE Plasma. KDE
sources the files with <code>.sh</code> extension found on <code>~/.config/plasma-workspace/env</code>, so
let&rsquo;s create ours.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>export PLASMA_USE_QT_SCALING<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span></code></pre></div></div><div class="row pl-3 pr-3"><div class="col-md-6 share-buttons"></div></div><hr><div class="row next-prev-navigator"></div><hr></div></div></div><a id=scroll-to-top class=btn><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://abdelhakbougouffa.pro#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://abdelhakbougouffa.pro#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=https://abdelhakbougouffa.pro#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=https://abdelhakbougouffa.pro#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=https://abdelhakbougouffa.pro#publications>Publications</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:firstname%20%28dot%29%20lastname@universite-paris-saclay.fr target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>firstname (dot) lastname@universite-paris-saclay.fr</span></a></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center"> 2023 Copyright</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script type=text/javascript src=/js/jquery-3.4.1.min.js></script>
<script type=text/javascript src=/js/popper.min.js></script>
<script type=text/javascript src=/js/bootstrap.min.js></script>
<script type=text/javascript src=/js/navbar.js></script>
<script type=text/javascript src=/js/plyr.js></script>
<script type=text/javascript src=/js/main.js></script>
<script type=text/javascript src=/js/darkreader.js></script>
<script type=text/javascript src=/js/darkmode-darkreader.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script>
<script src=/js/single.js></script>
<script>hljs.initHighlightingOnLoad()</script></body></html>